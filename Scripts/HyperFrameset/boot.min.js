/*!
 * Copyright 2012-2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(){var H={no_boot:false,no_frameset:false,no_style:false,file_access_from_files:false,capturing:true,log_level:"warn",hidden_timeout:3000,startup_timeout:10000,polling_interval:1000/60,html5_block_elements:"article aside figcaption figure footer header hgroup main nav section",html5_inline_elements:"abbr mark output time audio video picture",main_script:"{bootscriptdir}HyperFrameset.js",config_script:"{bootscriptdir}config.js"};var W="self";var n="frameset";var P=this;var f=P.document;var x=P.console;if(!x||!x.log){return;}if(!(x.info&&x.warn&&x.error)){x.log("Interception aborting: depends on console.warn");return;}var o="Meeko";var G=P.Meeko||(P.Meeko={});var B=(function(){if(!P.XMLHttpRequest){return false;}switch(location.protocol){default:return false;case"http:":case"https:":return true;case"file:":try{var ac=new XMLHttpRequest;var ab=f.URL+(location.search?"&":"?")+o+(new Date).getTime();var Z=false;ac.onerror=function(){Z=true;};ac.open("get",ab,true);if(Z){return false;}ac.send();if(Z){return false;}if(ac.readyState===4){return false;}if(ac.status!==0){return false;}ac.abort();return true;}catch(aa){return false;}}return false;})();var R=(function(){if(P.requestAnimationFrame){return true;}var aa,ab="moz ms o webkit".split(/\s+/);while(aa=ab.shift()){var Z=aa+"RequestAnimationFrame";if(P[Z]){return true;}}return false;})();var I=(function(){if(P.MutationObserver){return true;}if(!P.addEventListener){return false;}var Z=false;var aa=f.createElement("div");aa.addEventListener("DOMAttrModified",function(ab){Z=true;},false);aa.setAttribute("hidden","");return Z;})();var M=function(Z){return Z?Z.toLowerCase():"";};function N(Z,ac,ab){for(var ad=Z.length,aa=0;aa<ad;aa++){if(ac.call(ab,Z[aa],aa,Z)){return true;}}return false;}function b(Z,ac,ab){for(var ad=Z.length,aa=0;aa<ad;aa++){ac.call(ab,Z[aa],aa,Z);}}function X(Z){return Z.split(/\s+/);}var y=function(aa){try{return(Function("return ( "+aa+" );"))();}catch(Z){return;}};if(!x.debug){x.debug=x.log;}var Q=X("debug info warn error none");b(Q,function(aa){var Z="_"+aa;if(!x[aa]){return;}x[Z]=x[aa];});var T="debug";Object.defineProperty(x,"logLevel",{get:function(){return T;},set:function(Z){Z=M(Z);if(Z==="all"){Z="debug";}if(Q.indexOf(Z)<0){return;}if(Z===T){return;}T=Z;var aa=false;b(Q,function(ac){var ab="_"+ac;if(ac===Z){aa=true;}if(!x[ab]||!aa){x[ac]=function(){};}else{x[ac]=x[ab];}});x.warn("Changed logLevel: "+Z);}});var h=(function(){if(!("JSON" in P)){return false;}try{if(!P.sessionStorage){return false;}}catch(Z){return false;}return true;})();var Y=h&&(function(){var Z="Meeko.options";var ab=sessionStorage.getItem(Z);var aa=y(ab);if(typeof aa!=="object"||aa===null){aa={};}return{getItem:function(ac){return aa[ac];},setItem:function(ad,ac){aa[ad]=ac;sessionStorage.setItem(Z,JSON.stringify(aa));}};})();var w=[];function j(ab,ac){if(!ac){ac=o+".options";}try{var ad=P[ab]||G[ab];if(!ad){return;}var aa=y(ad.getItem(ac));if(aa){w.push(function(ae){return aa[ae];});}}catch(Z){x.warn(ab+" inaccessible");}}j("sessionStorage");j("localStorage");if(G.options){w.push(function(Z){return G.options[Z];});}var s=function(Z,aa){var ab=null;N(w,function(ac){var ad=ac(Z);if(ad==null){return false;}switch(aa){case"string":ab=ad;break;case"number":if(!isNaN(ad)){ab=1*ad;}break;case"boolean":ab=ad;break;}return(ab!==null);});return ab;};var F=G.bootOptions=(function(){var aa={};for(var Z in H){var ab=aa[Z]=H[Z];var ac=s(Z,typeof ab);if(ac!=null){aa[Z]=ac;}}return aa;})();var q=(function(){var aa=location.search,Z={};if(aa){aa.substr(1).replace(/(?:^|&)([^&=]+)=?([^&]*)/g,function(ab,ac,ad){ad=(ad)?decodeURIComponent(ad):true;Z[ac]=ad;});}return Z;})();function J(Z){if(q[Z]||F[Z]){return true;}}if(J("no_boot")){return;}if(F.log_level){x.logLevel=F.log_level;}function O(Z){return Z&&Z.nodeType===1?Z.tagName.toLowerCase():"";}function U(Z,ab){ab=ab||f;var aa=[];b(ab.getElementsByTagName(Z),function(ac){aa.push(ac);});return aa;}function a(Z){var aa;while(aa=Z.firstChild){Z.removeChild(aa);}}function c(aa,ac){var Z=[];for(var ab=aa.nextSibling;ab;ab=ab.nextSibling){Z.push(ab);}if(ac){b(Z,ac);}return Z;}if(!f.head){f.head=U("head")[0];}if(!f.head){throw"ABORT: <head> not found. This implies a legacy browser.";}function S(){var Z=f.currentScript;if(Z){return Z;}var aa=U("script");Z=aa[aa.length-1];return Z;}function A(ab,ac){if(ab.substr(0,2)=="//"){ab=location.protocol+ab;}for(var aa in ac){ab=ab.replace("{"+aa+"}",ac[aa]);}var Z=f.createElement("a");Z.setAttribute("href",ab);return Z.href;}var l=(function(){var aa=false;var Z=[];function ab(ae){if(typeof ae!=="function"){return;}Z.push(ae);if(aa){ad();}}function ad(){b(Z,function(ae){setTimeout(ae);});Z.length=0;}if(/loaded|complete/.test(f.readyState)){aa=true;}else{f.addEventListener("DOMContentLoaded",ac,false);P.addEventListener("load",ac,false);}return ab;function ac(ae){aa=true;f.removeEventListener("DOMContentLoaded",ac,false);P.removeEventListener("load",ac,false);ad();}})();var v=(function(){var am=f.head;var ag=f.createElement("script");var an=(ag.setAttribute("onload",";"),typeof ag.onload==="function");var ae=(ag.async===true);if(!an){throw"script.onload not supported in this browser";}function ac(aq,au,ao){var ap=f.createElement("script");ap.onerror=at;ap.onload=ar;ap.src=aq;if(ae){ap.async=false;am.appendChild(ap);}return ap;function ar(){ap.onerror=null;ap.onload=null;au();}function at(av){ap.onerror=null;ap.onload=null;ao(Error("An error occured while loading "+ap.src));}}function ab(ao){if(ae){return;}am.appendChild(ao);}function aj(ao){if(!ao.parentNode){return;}ao.parentNode.removeChild(ao);}var ai=[];var aa,ak;var Z=false;function ah(ap,aq,ao){if(Z){setTimeout(ao);return;}aa=aq;ak=ao;b(ap,function(ar){switch(typeof ar){case"string":ai.push(ac(ar,ad,al));break;case"function":ai.push(ar);break;default:break;}});ad();}function af(){if(Z){return;}if(ai.length<=0){return;}Z=true;al(Error("Startup aborted"));}function al(aq){var ap;while(ap=ai.shift()){if(typeof ap=="function"){continue;}aj(ap);}if(ak){try{ak(aq);}catch(ao){}}else{setTimeout(function(){throw aq;});}if(!Z){af();}}function ad(){var ao;while(ai.length){ao=ai.shift();if(typeof ao=="function"){try{ao();continue;}catch(ap){al(ap);return;}}else{setTimeout(function(){ab(ao);});return;}}if(!Z&&aa){aa();}}return{queue:ah,abort:af};})();var u=(function(){var aa=X(F.html5_block_elements);var ab=X(F.html5_inline_elements);function ac(){if(aa.length<=0){return;}var ag=aa.join(", ")+" { display: block; }\n";var ae=f.head;var af=f.createElement("style");if("textContent" in af){af.textContent=ag;}else{var ad=f.createDocumentFragment();ad.appendChild(af);af.styleSheet.cssText=ag;}ae.insertBefore(af,ae.firstChild);}function Z(ad){if(!ad){ad=f;ac();}b(aa.concat(ab),function(ae){ae=ae.toUpperCase();ad.createElement(ae);});}return Z;})();var m=(function(){var ae=f.head;var ad=f.createDocumentFragment();var Z=f.createElement("style");ad.appendChild(Z);var ab="body",ah="visibility",ag="hidden";var aa=ab+" { "+ah+": "+ag+"; }\n";if(Z.styleSheet){Z.styleSheet.cssText=aa;}else{Z.textContent=aa;}function ac(){ae.insertBefore(Z,e);}function af(){var aj=F.polling_interval;if(Z.parentNode!=ae){return;}ae.removeChild(Z);var ai=U(ab)[0];ai.style[ah]=ag;setTimeout(function(){ai.style[ah]="";},aj);}return{hide:ac,unhide:af};})();var r=(function(){var ab="";var Z={start:function(ad){var ae=Z.test();if(ae){if(ad){throw ae;}else{x.warn(ae);}}ab+=ac(f);ab+=aa(f.documentElement);ab+=aa(f.head);f.write('<plaintext style="display: none;">');},test:function(){if(f.body){throw"When capturing, boot-script MUST be in - or before - <head>";}if(U("script").length>1){return"When capturing, boot-script SHOULD be first <script>";}var ad=c(e);if(N(ad,function(af){if(af.nodeType!==1){return false;}if(af===i){return false;}var ae=O(af);if(ae==="title"&&af.firstChild===null){return false;}if(ae!=="meta"){return true;}if(af.httpEquiv||af.getAttribute("charset")){return false;}return true;})){return"When capturing, only <meta http-equiv> or <meta charset> nodes may precede boot-script";}return false;},getDocument:function(){return new G.Promise(function(ae,ad){l(function(){var ah=U("plaintext");var ag=ah[ah.length-1];var af=ag.firstChild.nodeValue;ag.parentNode.removeChild(ag);if(!/\s*<!DOCTYPE/i.test(af)){af=ab+af;}ae(new String(af));});}).then(function(ad){return G.htmlParser.parse(ad,{url:f.URL,mustResolve:false});});}};return Z;function aa(ae){var ad=ae.outerHTML;return ad.substr(0,ad.indexOf(">")+1);}function ac(ae){var ad=ae.doctype;return(ad)?"<!DOCTYPE "+ad.name+(ad.publicId?' PUBLIC "'+ad.publicId+'"':"")+(ad.systemId?' "'+ad.systemId+'"':"")+">\n":"<!DOCTYPE html>\n";}})();var i;if(G.bootScript){i=G.bootScript;}else{i=G.bootScript=S();if(f.body){x.warn("Boot-script SHOULD be in <head> and MUST NOT have @async or @defer");}}var C=G.bootParams={bootscriptdir:A(i.src).replace(/\/[^\/]*$/,"/")};if(G.bootConfig){G.bootConfig();}var e=f.createElement("link");e.rel=W;e.href=f.URL;f.head.insertBefore(e,f.head.firstChild);u();if(J("no_style")){l(function(){var Z=e.parentNode;c(e,function(aa){switch(O(aa)){case"style":break;case"link":if(/\bSTYLESHEET\b/i.test(aa.rel)){break;}return;default:return;}Z.removeChild(aa);});});return;}var d=J("no_frameset");if(d){return;}if(!(history.pushState&&B&&"readyState" in f&&R&&I)){x.debug("HyperFrameset depends on native XMLHttpRequest, history.pushState, and MutationObserver");return;}if(location.protocol==="file:"){if(!J("file_access_from_files")){x.debug("HyperFrameset is not recommended for `file:` URLs. Aborting.");return;}else{x.warn("HyperFrameset is not recommended for `file:` URLs. Continuing anyway.");}}var E=F.capturing;if(E==="auto"){E=!f.body;}if(!Y){E=false;}if(E){r.start(E==="strict");}f.write=f.writeln=f.open=f.close=function(){throw"document.write(), etc is incompatible with HyperFrameset";};var g=F.hidden_timeout;if(g>0){m.hide();setTimeout(m.unhide,g);}function L(){G.DOM.ready=l;}function z(){var Z;if(E){Z=G.framer.start({contentDocument:r.getDocument()});}else{Z=G.framer.start({contentDocument:new G.Promise(function(ac,ab){var aa=f.cloneNode(true);var ad=aa.head;a(ad);c(e,function(af){var ae=aa.importNode(af,true);switch(O(af)){case"":break;case"script":if(!af.type||/^text\/javascript$/i.test(af.type)){break;}default:af.parentNode.removeChild(af);break;}ad.appendChild(ae);});a(f.body);ac(aa);})});}Z.then(m.unhide,function(aa){m.unhide();throw aa;});}function K(Z){switch(typeof Z){case"string":return A(Z,C);case"function":return Z;default:return function(){};}}var t=F.main_script;if(typeof t!=="string"){throw"HyperFrameset script URL is not configured";}t=F.main_script=A(t,C);var D=F.config_script;if(D instanceof Array){b(D,function(Z,aa,ab){ab[aa]=K(Z);});}else{D=[K(D)];F.config_script=D;}var k=[].concat(t,L,D);function V(Z){v.queue(k,Z,function(aa){setTimeout(function(){throw aa;});if(E){l(function(){if(Y.getItem("no_frameset")===false){return;}Y.setItem("no_frameset",true);location.reload();});}else{m.unhide();}});}if(E){l(function(){if(P.stop){P.stop();}setTimeout(function(){V(z);});});}else{setTimeout(function(){V(function(){l(z);});});}var p=F.startup_timeout;if(p>0){setTimeout(function(){v.abort();},p);}}).call(this);