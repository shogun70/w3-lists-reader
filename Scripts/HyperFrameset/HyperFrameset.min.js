(function(){if(!this.Meeko){this.Meeko={};}if(!this.vendorPrefix){this.vendorPrefix="meeko";}}).call(this);
/*!
 JS and Promise utils
 (c) Sean Hogan, 2008,2012,2013,2014,2015
 Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
*/
(function(){var g=this.Meeko;var j=g.stuff={};var r=function(y){return y?y.toUpperCase():"";};var p=function(y){return y?y.toLowerCase():"";};function b(y){return y?y.charAt(0).toUpperCase()+y.substr(1):"";}function o(y){return y?_.map(y.split("-"),function(z,A){return A===0?z:b(z);}).join(""):"";}function k(y){return y?_.map(y.split(/(?=[A-Z])/),function(z,A){return A===0?z:_.lc(z);}).join("-"):"";}var s=function(y,A){for(var B=y.length,z=0;z<B;z++){if(y[z]===A){return true;}}return false;};var u=function(y,B,A){for(var C=y.length,z=0;z<C;z++){B.call(A,y[z],z,y);}};var h=function(y,B,A){for(var C=y.length,z=0;z<C;z++){if(B.call(A,y[z],z,y)){return true;}}return false;};var x=function(y,B,A){for(var C=y.length,z=0;z<C;z++){if(!B.call(A,y[z],z,y)){return false;}}return true;};var w=function(y,C,B){var z=[];for(var E=y.length,A=0;A<E;A++){var D=y[A];z[A]=C?C.call(B,D,A,y):D;}return z;};var f=function(y,C,B){var z=[];for(var E=y.length,A=0;A<E;A++){var D=C.call(B,y[A],A,y);if(D){z.push(y[A]);}}return z;};function d(y,C,B,z){for(var F=y.length,A=0;A<F;A++){var D=y[A];var E=C.call(B,D,A,y);if(E){return z?A:D;}}return z?-1:undefined;}var c=function(y,A,z){return d(y,A,z,true);};var m=function(y,A,z){return d(y,A,z,false);};var i=function(A,z){var y=[];u(A,function(B){if(s(z,B)||s(y,B)){return;}y.push(B);});return y;};var v=function(A,z){var y=[].concat(i(A,z),i(z,A));return y;};var n=function(y){return y.split(/\s+/);};var a=function(y,B,A){for(var z in y){B.call(A,y[z],z,y);}};var t=function(y,C,B){var D=Object.keys(y);for(var A=0,E=D.length;A<E;A++){var z=D[A];C.call(B,y[z],z,y);}};var l=function(z){if(z){for(var y in z){if(z.hasOwnProperty(y)){return false;}}}return true;};var e=function(y,z){t(z,function(C,B,A){if(typeof this[B]!=="undefined"){return;}this[B]=A[B];},y);return y;};var q=function(y,z){t(z,function(C,B,A){this[B]=A[B];},y);return y;};q(j,{uc:r,lc:p,ucFirst:b,camelCase:o,kebabCase:k,words:n,contains:s,includes:s,forEach:u,some:h,every:x,map:w,filter:f,find:m,findIndex:c,without:i,difference:v,forIn:a,forOwn:t,isEmpty:l,defaults:e,assign:q,extend:q});}).call(this);(function(){var b=this;var a=b._||Meeko.stuff;var c=Meeko.Task=(function(){var g=60;var o=1000/g;var q=0.75;var j=o*q;var r=b.performance&&b.performance.now?b.performance:Date.now?Date:{now:function(){return(new Date).getTime();}};var z=(function(){var C=b.requestAnimationFrame;if(C){return C;}a.some(a.words("moz ms o webkit"),function(G){var F=G+"RequestAnimationFrame";if(!b[F]){return false;}C=b[F];return true;});if(C){return C;}var D=0;var E;C=function(F,H){if(E){throw"schedule() only allows one callback at a time";}E=F;var G=r.now();var I=Math.max(0,o-(G-D));var J=b.setTimeout(function(){D=r.now();var K=E;E=undefined;K(D,H);},I);return J;};return C;})();var s=[];var n=[];var m=[];var t=false;var p=false;function w(C){s.push(C);if(p){return;}if(t){return;}z(f);t=true;}function i(C){if(p){n.push(C);return;}w(C);}function B(C,D){if(D<=0||D==null){i(C);return;}setTimeout(function(){try{C();}catch(E){h(E);}f();},D);}var x={};var d={};function u(){a.forEach([x,d],function(C){a.assign(C,{count:0,totalTime:0,minTime:Infinity,maxTime:0,avgTime:0});});}u();function y(D,C){D.count++;D.totalTime+=C;if(C<D.minTime){D.minTime=C;}if(C>D.maxTime){D.maxTime=C;}}function l(){var C=a.assign({},x);var D=a.assign({},d);C.avgTime=C.totalTime/C.count;D.avgTime=D.totalTime/D.count;return{exec:C,frame:D};}var e=r.now();function A(C){var D=r.now()-e;if(!C){return D;}return j-D;}var v=true;function f(){var F=r.now();if(!v){y(d,F-e);}e=F;p=true;var E;var C;while(s.length){E=s.shift();if(typeof E!=="function"){continue;}try{E();}catch(D){h(D);}C=A();if(C>=j){break;}}t=false;p=false;if(C){y(x,C);}s=s.concat(n);n=[];if(s.length){z(f);t=true;v=false;}else{v=true;}k();}function h(C){m.push(C);}var k=(function(){var E=vendorPrefix+"-error";function C(){var F=D(m);a.forEach(F,function(H){b.addEventListener(E,H,false);});var G=document.createEvent("Event");G.initEvent(E,true,true);b.dispatchEvent(G);a.forEach(F,function(H){b.removeEventListener(E,H,false);});m=[];}function D(F){return a.map(F,function(G){return function(){if(console.logLevel==="debug"){if(G&&G.stack){console.debug(G.stack);}else{console.debug("Untraceable error: "+G);}}throw G;};});}return C;})();return{asap:w,defer:i,delay:B,getTime:A,getStats:l,resetStats:u,postError:h};})();}).call(this);(function(){var b=this;var a=b._||Meeko.stuff;var d=Meeko.Task;var c=Meeko.Promise=(function(){var m=function(r){if(!(this instanceof m)){return new m(r);}var q=this;q._initialize();try{r(p,o);}catch(n){o(n);}return q;function p(s){if(typeof s!=="function"){q._resolve(s);return;}try{q._resolve(s());}catch(t){q._reject(t);}}function o(s){if(typeof s!=="function"){q._reject(s);return;}try{q._reject(s());}catch(t){q._reject(t);}}};a.defaults(m,{applyTo:function(n){var p={};var o=new m(function(r,q){p.resolve=r;p.reject=q;});if(!n){n=o;}a.assign(n,p);return o;},isPromise:function(n){return n instanceof m;},isThenable:function(n){return n!=null&&typeof n.then==="function";}});a.defaults(m.prototype,{_initialize:function(){var n=this;a.defaults(n,{isPending:true,isFulfilled:false,isRejected:false,value:undefined,reason:undefined,_willCatch:false,_processing:false});},inspectState:function(){return this;},_fulfil:function(n,o){var p=this;if(!p.isPending){return;}p.isPending=false;p.isRejected=false;p.isFulfilled=true;p.value=n;p._requestProcessing(o);},_resolve:function(p,o){var q=this;if(!q.isPending){return;}if(m.isPromise(p)&&!p.isPending){if(p.isFulfilled){q._fulfil(p.value,o);}else{q._reject(p.reason,o);}return;}if(m.isThenable(p)){try{p.then(function(r){q._resolve(r,true);},function(r){q._reject(r,true);});}catch(n){q._reject(n,o);}return;}q._fulfil(p,o);},_reject:function(n,o){var p=this;if(!p.isPending){return;}p.isPending=false;p.isFulfilled=false;p.isRejected=true;p.reason=n;if(!p._willCatch){d.postError(n);}else{p._requestProcessing(o);}},_requestProcessing:function(n){var o=this;if(o.isPending){return;}if(!o._willCatch){return;}if(o._processing){return;}if(n){o._processing=true;o._process();o._processing=false;}else{d.asap(function(){o._processing=true;o._process();o._processing=false;});}},_process:function(){var q=this;var o;var p,n;if(q.isFulfilled){o=q.value;p=q._fulfilCallbacks;}else{o=q.reason;p=q._rejectCallbacks;}delete q._fulfilCallbacks;delete q._rejectCallbacks;if(p){while(p.length){n=p.shift();if(typeof n==="function"){n(o);}}}},then:function(o,n){var p=this;return new m(function(t,s){var q=o?h(o,t,s):function(u){t(u);};var r=n?h(n,t,s):function(u){s(u);};if(!p._fulfilCallbacks){p._fulfilCallbacks=[];}if(!p._rejectCallbacks){p._rejectCallbacks=[];}p._fulfilCallbacks.push(q);p._rejectCallbacks.push(r);p._willCatch=true;p._requestProcessing();});},"catch":function(n){var o=this;return o.then(undefined,n);}});function h(p,o,n){return function(){try{var r=p.apply(undefined,arguments);o(r);}catch(q){n(q);}};}a.defaults(m,{resolve:function(n){if(m.isPromise(n)){return n;}var o=Object.create(m.prototype);o._initialize();o._resolve(n);return o;},reject:function(n){return new m(function(p,o){o(n);});}});var k=(function(){var p=[];function r(s){var u={fn:s};var t=m.applyTo(u);n(u);return t;}function n(s){g(s.fn).then(function(t){if(t){s.resolve();}else{o(s);}},function(t){s.reject(t);});}function o(t){var s=p.length>0;p.push(t);if(!s){d.defer(q);}}function q(){var s=p;p=[];a.forEach(s,n);}return r;})();var g=function(n){if(m.isPromise(n)){if(n.isPending){return n;}if(d.getTime(true)<=0){return n.then();}return n;}if(m.isThenable(n)){return m.resolve(n);}if(typeof n==="function"){if(d.getTime(true)<=0){return m.resolve().then(n);}return new m(function(o){o(n);});}if(d.getTime(true)<=0){return m.resolve(n).then();}return m.resolve(n);};var e=function(n){if(m.isPromise(n)){if(n.isPending){return n;}return n.then();}if(m.isThenable(n)){return m.resolve(n);}if(typeof n==="function"){return m.resolve().then(n);}return m.resolve(n).then();};function j(n){return new m(function(p,o){if(n<=0||n==null){d.defer(p);}else{d.delay(p,n);}});}function i(o,p){var s=m.resolve(o);for(var t=p.length,q=0;q<t;q++){var r=p[q];s=s.then(r);}return s;}function l(o,n,q,p){return new m(function(v,u){var t=n.length;var s=0;var r=new f(256,2);w(o);return;function w(C){var B;var A=0;var x=1;while(s<t){if(m.isThenable(C)){if(!m.isPromise(C)||!C.isFulfilled){C.then(w,u);if(A<=0||!B||s>=t){return;}var y=d.getTime(true);r.update(A,B-y);return;}C=C.value;}try{C=q.call(p,C,n[s],s,n);s++;A++;}catch(z){u(z);return;}if(s>=t){break;}if(A<x){continue;}var y=d.getTime(true);if(B){r.update(A,B-y);}if(y<=0){d.asap(function(){w(C);});return;}A=0;x=r.getTimeoutCount(y);B=y;}v(C);}});}function f(o,p){if(!(this instanceof f)){return new f(o,p);}var n=this;a.assign(n,{count:0,totalTime:0,currLimit:1,absLimit:!o?256:o<1?1:o,multiplier:!p?2:p<1?1:p});}a.assign(f.prototype,{update:function(o,p){var n=this;n.count+=o;n.totalTime+=p;},getTimeoutCount:function(q){var p=this;if(p.count<=0){return 1;}var o=p.totalTime/p.count;var r=Math.floor(q/o);if(r<=0){return 1;}if(r<p.currLimit){return r;}r=p.currLimit;if(p.currLimit>=p.absLimit){return r;}p.currLimit=p.multiplier*p.currLimit;if(p.currLimit<p.absLimit){return r;}p.currLimit=p.absLimit;console.debug("Promise.reduce() hit absLimit: ",p.absLimit);return r;}});a.defaults(m,{asap:g,defer:e,delay:j,wait:k,pipe:i,reduce:l});return m;})();}).call(this);(function(){var e=this;var c=e.document;var b=e.Meeko;var d=e._||b.stuff;var a=b.URL=(function(){var f=function(n,p){if(!(this instanceof f)){return new f(n,p);}var o;if(p){o=typeof p==="string"?new f(p):p;}l.call(this,n,o);};var l=function(n,q){if(q){n=q.resolve(n);d.assign(this,new f(n));}else{var o=k(n);for(var p in o){this[p]=o[p];}g(this);}};var h=["source","protocol","hostname","port","pathname","search","hash"];var m=/^([^:\/?#]+:)?(?:\/\/([^:\/?#]*)(?::(\d*))?)?([^?#]*)?(\?[^#]*)?(#.*)?$/;var k=function(p){p=p.trim();var o=m.exec(p);var q={};for(var s=h.length,r=0;r<s;r++){q[h[r]]=o[r]||"";}return q;};function g(n){n.protocol=d.lc(n.protocol);n.supportsResolve=/^(http|https|ftp|file):$/i.test(n.protocol);if(!n.supportsResolve){return;}if(n.hostname){n.hostname=d.lc(n.hostname);}if(!n.host){n.host=n.hostname;if(n.port){n.host+=":"+n.port;}}if(!n.origin||n.origin==="null"){n.origin=n.protocol+"//"+n.host;}if(!n.pathname){n.pathname="/";}var o=n.pathname.split("/");o.shift();n.filename=o.pop();n.basepath=o.length?"/"+o.join("/")+"/":"/";n.base=n.origin+n.basepath;n.nosearch=n.origin+n.pathname;n.nohash=n.nosearch+n.search;n.href=n.nohash+n.hash;n.toString=function(){return n.href;};}f.prototype.resolve=function j(n){n=n.trim();if(!this.supportsResolve){return n;}var p=n.charAt(0),o=n.substr(0,2);var q=/^[a-zA-Z0-9-]+:/.test(n)?n:o=="//"?this.protocol+n:p=="/"?this.origin+n:p=="?"?this.nosearch+n:p=="#"?this.nohash+n:p!="."?this.base+n:o=="./"?this.base+n.replace("./",""):(function(){var r=n;var s=this.basepath;while(r.substr(0,3)=="../"){r=r.replace("../","");s=s.replace(/[^\/]+\/$/,"");}return this.origin+s+r;}).call(this);return q;};var i=f.attributes=(function(){var o=function(u,t,r,v){var w=c.createElement(u);var q=t in w;var s=d.lc(t);d.defaults(this,{tagName:u,attrName:t,loads:r,compound:v,supported:q});};d.defaults(o.prototype,{resolve:function(t,u){var s=this.attrName;var r=t.getAttribute(s);if(r==null){return;}var q=this.resolveURL(r,u);if(q!==r){t.setAttribute(s,q);}},resolveURL:function(r,t){var s=r.trim();var q=s;switch(s.charAt(0)){case"":break;default:q=t.resolve(s);break;}return q;}});var p={};d.forEach(d.words("link@<href script@<src img@<longDesc,<src,+srcset iframe@<longDesc,<src object@<data embed@<src video@<poster,<src audio@<src source@<src,+srcset input@formAction,<src button@formAction,<src a@+ping,href area@href q@cite blockquote@cite ins@cite del@cite form@action"),function(u){var q=u.split("@"),s=q[0],r=q[1];var t=p[s]={};d.forEach(r.split(","),function(w){var y=false;var x=false;var v=w.charAt(0);switch(v){case"<":y=true;w=w.substr(1);break;case"+":x=true;w=w.substr(1);break;}t[w]=new o(s,w,y,x);});});function n(s,r){var q=s.split(/\s*,\s*/);d.forEach(q,function(t,u){q[u]=t.replace(/^\s*(\S+)(?=\s|$)/,function(w,v){return r.resolve(v);});});return q.join(", ");}p.img["srcset"].resolveURL=n;p.source["srcset"].resolveURL=n;p.a["ping"].resolveURL=function(s,r){var q=s.split(/\s+/);d.forEach(q,function(t,u){q[u]=r.resolve(t);});return q.join(" ");};return p;})();return f;})();}).call(this);
/*!
 DOM utils
 (c) Sean Hogan, 2008,2012,2013,2014
 Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
*/
(function(){var e=this;var b=e.document;var a=e.Meeko;var c=e._||a.stuff;var f=a.Promise;var d=a.DOM=(function(){var X=Math.round(Math.random()*1000000);var j="__"+vendorPrefix+X;var F=0;var k=[];var n={};var m=function(aa){var ab=aa[j];if(ab){return ab;}ab="__"+F++;aa[j]=ab;k.push(aa);return ab;};var z=function(aa,ab){var ac=m(aa);n[ac]=ab;};var Q=function(aa){var ab=aa[j];return !ab?false:ab in n;};var y=function(aa){var ab=aa[j];if(!ab){return;}return n[ab];};var B=function(ae,ab){for(var aa=k.length-1;aa>=0;aa--){var ac=k[aa];delete k[aa];if(ae){ae.call(ab,ac);}var ad=ac[j];delete n[ad];}k.length=0;};var R=function(aa){return aa&&aa.nodeType===1?c.lc(aa.tagName):"";};var R=function(aa){return aa&&aa.nodeType===1?c.lc(aa.tagName):"";};var h;if(b.documentElement.matches){h=function(ab,aa){return(ab&&ab.nodeType===1)?ab.matches(aa):false;};}else{c.some(c.words("moz webkit ms o"),function(aa){var ab=aa+"MatchesSelector";if(b.documentElement[ab]){h=function(ad,ac){return(ad&&ad.nodeType===1)?ad[ab](ac):false;};return true;}return false;});}var g=h?function(ab,aa,ac){if(!(ab&&ab.nodeType===1)){return false;}if(typeof aa==="function"){return aa(ab,ac);}return O(function(ad){return h(ab,ad);},aa,ac);}:function(){throw Error("matches not supported");};var w=h?function(ab,aa,ad){if(typeof aa==="function"){for(var ac=ab;ac&&ac!==ad;ac=ac.parentNode){if(ac.nodeType!==1){continue;}if(aa(ac,ad)){return ac;}}return null;}return O(function(af){for(var ae=ab;ae&&ae!==ad;ae=ae.parentNode){if(ae.nodeType!==1){continue;}if(h(ae,af)){return ae;}}},aa,ad);}:function(){throw Error("closest not supported");};function O(ae,ab,ad){var af=ab;if(ad){var ac=m(ad);ad.setAttribute(j,ac);af=s(ab,ad);}var aa=ae(af);if(ad){ad.removeAttribute(j);}return aa;}function s(ad,ac){switch(ac.nodeType){case 1:break;case 9:case 11:return ad;default:return ad;}var ae=m(ac);var aa="["+j+"="+ae+"]";var ab=ad.split(/,(?![^\(]*\)|[^\[]*\])/);ab=c.map(ab,function(af){if(/^:scope\b/.test(af)){return af.replace(/^:scope\b/,aa);}else{return aa+" "+af;}});return ab.join(", ");}var N=function(ab,aa){if(!ab){return;}if(!aa){aa=b;}if(!aa.getElementById){throw Error("Context for findId() must be a Document node");}return aa.getElementById(ab);};var C=b.querySelectorAll?function(ab,ad,ac,aa){if(!ad){ad=b;}if(!ad.querySelectorAll){return[];}if(ac&&!ac.nodeType){ac=ad;}return O(function(af){var ae=c.map(ad.querySelectorAll(af));if(aa&&h(ad,af)){ae.unshift(ad);}return ae;},ab,ac);}:function(){throw Error("findAll() not supported");};var T=b.querySelector?function(ab,ad,ac,aa){if(!ad){ad=b;}if(!ad.querySelector){return null;}if(ac&&!ac.nodeType){ac=ad;}return O(function(ae){if(aa&&h(ad,ae)){return ad;}return ad.querySelector(ae);},ab,ac);}:function(){throw Error("find() not supported");};var V=function(ad,aa,ag,af){ad=c.lc(ad);if(ag){ag=c.lc(ag);if(ad==="ending"||ad==="before"){throw Error("siblings() startNode looks like stopNode");}if(ag==="starting"||ag==="after"){throw Error("siblings() stopNode looks like startNode");}if(!af||af.parentNode!==aa.parentNode){throw Error("siblings() startNode and stopNode are not siblings");}}var ac=[];if(!aa||!aa.parentNode){return ac;}var ae,ab,ah=aa.parentNode.firstChild;switch(ad){case"starting":ae=aa;break;case"after":ae=aa.nextSibling;break;case"ending":ae=ah;ab=aa.nextSibling;break;case"before":ae=ah;ab=aa;break;default:throw Error(ad+" is not a valid configuration in siblings()");}if(ag){switch(ag){case"ending":ab=af.nextSibling;break;case"before":ab=af;break;}}if(!ae){return ac;}for(;ae&&ae!==ab;ae=ae.nextSibling){ac.push(ae);}return ac;};var K=b.documentElement.contains&&function(ab,aa){if(ab===aa){return true;}if(ab.contains){return ab.contains(aa);}if(ab.documentElement){return ab.documentElement.contains(aa);}return false;}||b.documentElement.compareDocumentPosition&&function(ab,aa){return(ab===aa)||!!(ab.compareDocumentPosition(aa)&16);}||function(ab,aa){throw Error("contains not supported");};function q(af,ad,ag){if(typeof ad==="object"){ag=ad;ad=ag.type;}var ab=ag&&"bubbles" in ag?!!ag.bubbles:true;var aa=ag&&"cancelable" in ag?!!ag.cancelable:true;if(typeof ad!=="string"){throw Error("trigger() called with invalid event type");}var ac=ag&&ag.detail;var ae=b.createEvent("CustomEvent");ae.initCustomEvent(ad,ab,aa,ac);if(ag){c.defaults(ae,ag);}return af.dispatchEvent(ae);}var W=[];function v(aa){if(c.includes(W,aa)){return;}W.push(aa);e.addEventListener(aa,function(ab){ab.stopPropagation=function(){console.warn("event.stopPropagation() is a no-op");};ab.stopImmediatePropagation=function(){console.warn("event.stopImmediatePropagation() is a no-op");};},true);}var E=(function(){var aa=false;var ab=b.createElement("div");ab.addEventListener("DOMAttrModified",function(ac){aa=true;},false);ab.setAttribute("hidden","");return aa;})();if(!("hidden" in b.documentElement)){var u=b.head;var U=b.createElement("style");var H="*[hidden] { display: none; }\n";U.textContent=H;u.insertBefore(U,u.firstChild);Object.defineProperty(Element.prototype,"hidden",{get:function(){return this.hasAttribute("hidden");},set:function(ac){if(!!ac){this.setAttribute("hidden","");}else{this.removeAttribute("hidden");}var ab=this.style.display;var aa=e.getComputedStyle(this,null);this.style.display=aa;this.style.display=ab;}});}if(e.MutationObserver){var P=new MutationObserver(function(aa,ab){c.forEach(aa,function(ac){S(ac.target);});});P.observe(b,{attributes:true,attributeFilter:["hidden"],subtree:true});}else{if(E){b.addEventListener("DOMAttrModified",function(aa){if(aa.attrName!=="hidden"){return;}S(aa.target);},true);}else{console.warn("element.visibilitychange event will not be supported");}}function S(ab){var aa=ab.hidden?"hidden":"visible";d.dispatchEvent(ab,"visibilitychange",{bubbles:false,cancelable:false,detail:aa});}function i(ab){var aa=d.closest(ab,"[hidden]");return(!aa);}function L(aa){return new f(function(ae,ad){var ab=d.closest(aa,"[hidden]");if(!ab){ae();return;}var ac=function(af){if(af.target.hidden){return;}ab.removeEventListener("visibilitychange",ac,false);L(aa).then(ae);};ab.addEventListener("visibilitychange",ac,false);});}var D=function(ab,aa,ac){var ad=aa.ownerDocument;if(ad.adoptNode){ac=ad.adoptNode(ac);}switch(ab){case"before":case"beforebegin":aa.parentNode.insertBefore(ac,aa);break;case"after":case"afterend":aa.parentNode.insertBefore(ac,aa.nextSibling);break;case"start":case"afterbegin":aa.insertBefore(ac,aa.firstChild);break;case"end":case"beforeend":aa.appendChild(ac);break;case"replace":aa.parentNode.replaceChild(ac,aa);break;case"empty":case"contents":var ae;while(ae=aa.firstChild){aa.removeChild(ae);}aa.appendChild(ac);break;}return aa;};var p=function(aa,ac){if(!ac){ac=b;}var ad=ac.createDocumentFragment();var ab;while(ab=aa.firstChild){ad.appendChild(ac.adoptNode(ab));}return ad;};var l=function(){return c.every(d.findAll("link"),function(ac){if(!ac.rel||!/^stylesheet$/i.test(ac.rel)){return true;}if(ac.type&&!/^text\/css$/i.test(ac.type)){return true;}if(ac.disabled){return true;}if(ac.readyState){return Z[ac.readyState];}var ab=ac.sheet;if(!ab){return false;}try{var ad=ab.rules||ab.cssRules;return true;}catch(aa){switch(aa.name){case"NS_ERROR_DOM_SECURITY_ERR":case"SecurityError":return true;case"NS_ERROR_DOM_INVALID_ACCESS_ERR":case"InvalidAccessError":return false;default:return true;}}});};var t=function(aa,ab){c.forEach(c.map(ab.attributes),function(ac){aa.setAttribute(ac.name,ac.value);});return aa;};var x=function(aa){c.forEach(c.map(aa.attributes),function(ab){aa.removeAttribute(ab.name);});return aa;};var J=(function(){var aa=b.implementation.createHTMLDocument("");return aa.URL===b.URL;})();var Y=(function(){try{var ab=b.cloneNode(false);if(ab.URL===b.URL){return true;}}catch(aa){}return false;})();var I=!J&&Y;var M=function(aa){if(!aa){aa=b;}var ab;if(I){ab=aa.cloneNode(false);}else{ab=aa.implementation.createHTMLDocument("");ab.removeChild(ab.documentElement);}return ab;};var A=function(ac,aa){if(!aa){aa=b;}var ab;if(I){ab=aa.cloneNode(false);docEl=ab.createElement("html");docEl.innerHTML="<head><title>"+ac+"</title></head><body></body>";ab.appendChild(docEl);}else{ab=aa.implementation.createHTMLDocument(ac);}return ab;};var G=function(aa){var ab=d.createDocument(aa);var ac=ab.importNode(aa.documentElement,true);ab.appendChild(ac);c.forEach(d.findAll("style",ab),function(ae){var ad=ae.sheet;if(!ad||ad.cssText==null){return;}if(ad.cssText!=""){return;}ae.textContent=ae.textContent;});return ab;};var o=function(ab){if(ab){var aa=d.findId(ab);if(aa){aa.scrollIntoView(true);}}else{e.scroll(0,0);}};var Z={uninitialized:false,loading:false,interactive:false,loaded:true,complete:true};var r=(function(){var ab=b.readyState;var ac=ab?Z[ab]:true;var aa=[];function ae(ah){if(typeof ah!=="function"){return;}aa.push(ah);if(ac){ag();}}function ag(){c.forEach(aa,function(ah){setTimeout(ah);});aa.length=0;}var ad={DOMContentLoaded:b,load:e};if(!ac){c.forOwn(ad,function(ai,ah){ai.addEventListener(ah,af,false);});}return ae;function af(ah){ac=true;c.forOwn(ad,function(aj,ai){aj.removeEventListener(ai,af,false);});ag();}})();return{uniqueIdAttr:j,uniqueId:m,setData:z,getData:y,hasData:Q,getTagName:R,contains:K,matches:g,findId:N,find:T,findAll:C,closest:w,siblings:V,dispatchEvent:q,manageEvent:v,adoptContents:p,SUPPORTS_ATTRMODIFIED:E,isVisible:i,whenVisible:L,insertNode:D,checkStyleSheets:l,copyAttributes:t,removeAttributes:x,ready:r,createDocument:M,createHTMLDocument:A,cloneDocument:G,scrollToId:o};})();}).call(this);(function(){var c=this;var a=c.document;var b=c._||Meeko.stuff;var d=Meeko.Task;Meeko.controllers=(function(){return{values:{},listeners:{},create:function(e){this.values[e]=[];this.listeners[e]=[];},has:function(e){return(e in this.values);},get:function(e){if(!this.has(e)){throw e+" is not a registered controller";}return this.values[e];},set:function(f,g){if(!this.has(f)){throw f+" is not a registered controller";}if(g===false||g==null){g=[];}else{if(typeof g==="string"||!("length" in g)){g=[g];}}var e=this.values[f];if(b.difference(g,e).length<=0){return;}this.values[f]=g;b.forEach(this.listeners[f],function(h){d.asap(function(){h(g);});});},listen:function(e,g){if(!this.has(e)){throw e+" is not a registered controller";}this.listeners[e].push(g);var f=this.values[e];d.asap(function(){g(f);});}};})();}).call(this);
/*!
 Sprocket
 (c) Sean Hogan, 2008,2012,2013,2014,2016
 Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
*/
(function(){var c=window.document;var b=this.Meeko;var d=window._||b.stuff;var g=b.Task;var f=b.Promise;var e=b.DOM;var a=b.sprockets=(function(){var s={};var k={};function n(N,M){var O;if(e.hasData(M)){O=e.getData(M);if(O.definition!==rule.definition){throw Error("Mismatch between definition and binding already present");}console.warn("Binding definition applied when binding already present");return O;}O=new m(N);e.setData(M,O);O.attach(M);return O;}function D(M){if(!e.hasData(M)){throw Error("No binding attached to element");}var N=e.getData(M);if(!N.inDocument){N.enteredDocumentCallback();}}function F(M){if(!e.hasData(M)){throw Error("No binding attached to element");}var N=e.getData(M);if(N.inDocument){N.leftDocumentCallback();}N.detach();e.setData(M,null);}var m=function(M){var N=this;N.definition=M;N.object=Object.create(M.prototype);N.handlers=M.handlers?d.map(M.handlers):[];N.listeners=[];N.inDocument=null;};d.assign(m,{getInterface:function(N){var M=e.getData(N);if(M&&M.object){return M;}},enteredDocumentCallback:function(M){var N=m.getInterface(M);if(!N){return;}N.enteredDocumentCallback();},leftDocumentCallback:function(M){var N=m.getInterface(M);if(!N){return;}N.leftDocumentCallback();},managedEvents:[],manageEvent:function(M){if(d.includes(this.managedEvents,M)){return;}this.managedEvents.push(M);window.addEventListener(M,function(N){N.stopPropagation=function(){console.debug("event.stopPropagation() is a no-op");};N.stopImmediatePropagation=function(){console.debug("event.stopImmediatePropagation() is a no-op");};},true);}});d.assign(m.prototype,{attach:function(O){var P=this;var N=P.definition;var M=P.object;M.element=O;P.attachedCallback();d.forEach(P.handlers,function(Q){var R=P.addHandler(Q);if(R){P.listeners.push(R);}});},attachedCallback:function(){var O=this;var N=O.definition;var M=O.object;O.inDocument=false;if(N.attached){N.attached.call(M,O.handlers);}},enteredDocumentCallback:function(){var O=this;var N=O.definition;var M=O.object;O.inDocument=true;if(N.enteredDocument){N.enteredDocument.call(M);}},leftDocumentCallback:function(){var O=this;var N=O.definition;var M=O.object;O.inDocument=false;if(N.leftDocument){N.leftDocument.call(M);}},detach:function(){var O=this;var N=O.definition;var M=O.object;d.forEach(O.listeners,O.removeListener,O);O.listeners.length=0;O.detachedCallback();},detachedCallback:function(){var O=this;var N=O.definition;var M=O.object;O.inDocument=null;if(N.detached){N.detached.call(M);}},addHandler:function(R){var S=this;var N=S.object;var O=N.element;var Q=R.type;var M=(R.eventPhase==1);if(M){console.warn("Capture phase for events not supported");return;}m.manageEvent(Q);var P=function(U){if(P.normalize){U=P.normalize(U);}try{return q.call(N,U,R);}catch(T){g.postError(T);throw T;}};P.type=Q;P.capture=M;O.addEventListener(Q,P,M);return P;},removeListener:function(Q){var S=this;var N=S.object;var O=N.element;var P=Q.type;var M=Q.capture;var R=(O===c.documentElement&&d.includes(redirectedWindowEvents,P))?window:O;R.removeEventListener(P,Q,M);},});if(!("defaultPrevented" in Event.prototype)){Event.prototype.defaultPrevented=false;Event.prototype._preventDefault=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.defaultPrevented=true;this._preventDefault();};}function q(Q,P){var R=this;var T=Q.target;var S=R.element;if(!e.hasData(S)){throw Error("Handler called on non-bound element");}if(!u(P,Q,true)){return;}var N=S;if(P.delegator){var O=e.closest(T,P.delegator,S);if(!O){return;}N=O;}switch(P.eventPhase){case 1:throw Error("Capture phase for events not supported");break;case 2:if(N!==T){return;}break;case 3:if(N===T){return;}break;default:break;}if(P.action){var M=P.action.call(R,Q,N);if(M===false){Q.preventDefault();}}return;}var j=function(O){var ab={};ab.type=O.event;if(null==O.event){console.warn("Invalid handler: event property undeclared");}function U(ad,af){var ae=O[ad];var ac;if(ae){ac=af[ae];if(null==ac){console.info("Ignoring invalid property "+ad+": "+ae);}}return ac;}ab.eventPhase=U("phase",{capture:1,target:2,bubble:3,"default-action":2019716164})||0;ab.preventDefault=U("default-action",{cancel:true,perform:false})||false;ab.stopPropagation=U("propagate",{stop:true,"continue":false})||false;function S(ae){var aj=O[ae];if(!aj){return null;}var ad=[];var ac=aj.split(/\s+/);for(var ai=ac.length,ag=0;ag<ai;ag++){var ah=ac[ag];var af=Number(ah);if(NaN!=af&&Math.floor(af)==af){ad.push(af);}}return ad;}ab.button=S("button");ab.clickCount=S("click-count");ab.key=O.key;ab.keyLocation=[];var R=O["key-location"];var W=(R)?R.split(/\s+/):[];for(var N=W.length,T=0;T<N;T++){var aa=W[T];switch(aa){case"standard":ab.keyLocation.push(KeyboardEvent.DOM_KEY_LOCATION_STANDARD);break;case"left":ab.keyLocation.push(KeyboardEvent.DOM_KEY_LOCATION_LEFT);break;case"right":ab.keyLocation.push(KeyboardEvent.DOM_KEY_LOCATION_RIGHT);break;case"numpad":ab.keyLocation.push(KeyboardEvent.DOM_KEY_LOCATION_NUMPAD);break;}}ab.text=O.text;ab.filter=new RegExp(O.filter,"");ab.attrName=O["attr-name"];ab.attrChange=[];var Z=O["attr-change"];var V=(Z)?Z.split(/\s+/):[];for(var N=V.length,T=0;T<N;T++){var aa=V[T];switch(aa){case"modification":ab.attrChange.push(MutationEvent.MODIFICATION);break;case"addition":ab.attrChange.push(MutationEvent.ADDITION);break;case"removal":ab.attrChange.push(MutationEvent.REMOVAL);break;}}ab.prevValue=O["prev-value"];ab.newValue=O["new-value"];if(null!=O.modifiers){ab.modifiers=[];var Y=O.modifiers;var M=(Y)?Y.split(/\s+/):[];for(var N=M,T=0;T<N;T++){var aa=M[T];var Q;Q=/^([+-]?)([a-z]+)(\??)$/.exec(aa);if(Q){var X=Q[2];var P=1;if(Q[3]){P=0;}else{if(Q[1]=="+"){P=1;}else{if(Q[1]=="-"){P=-1;}}}ab.modifiers.push({key:X,condition:P});}}}else{ab.modifiers=null;}ab.action=O.action;return ab;};var C={};C.AllEvents={};t("FocusEvents","focus blur focusin focusout");t("MouseEvents","click dblclick mousedown mouseup mouseover mouseout mousemove mousewheel");t("KeyboardEvents","keydown keyup");t("UIEvents","load unload abort error select change submit reset resize scroll");function t(O,N){var M={};C[O]=M;d.forEach(d.words(N),z,M);}function z(M){C.AllEvents[M]=true;this[M]=true;}var u=function(X,M,T){var N=C.AllEvents;var R=C.MouseEvents;var P=C.KeyboardEvents;var W=C.UIEvents;if(M.type!=X.type){return false;}if(!T&&!phaseMatchesEvent(X.eventPhase,M)){return false;}var S=M.type;if(S in R){if(X.button&&X.button.length){if(!d.includes(X.button,M.button)==-1){return false;}}if(X.clickCount&&X.clickCount.length){var Q=1;if("click"==M.type){Q=(M.detail)?M.detail:1;}if(!d.includes(X.clickCount,Q)){return false;}}if(X.modifiers){if(!h(X.modifiers,M)){return false;}}}var O={Backspace:"U+0008",Delete:"U+007F",Escape:"U+001B",Space:"U+0020",Tab:"U+0009"};if(S in P){if(X.key){var V=false;var U=M.keyIdentifier;if(/^U\+00....$/.test(U)){U=U.replace(/^U\+00/,"U+");}if(X.key!=U&&O[X.key]!=U){return false;}}if(X.modifiers||X.key){if(!h(X.modifiers||["none"],M)){return false;}}}if(S in W){}if(!(S in N)){}return true;};var h=function(U,M){var W={control:M.ctrlKey,shift:M.shiftKey,alt:M.altKey,meta:M.metaKey};var S=M.ctrlKey||M.shiftKey||M.altKey||M.metaKey;var Q=!S;var T=false;if(U){for(var R=0,N=U.length;R<N;R++){var O=U[R];switch(O.key){case"none":if(S){return false;}break;case"any":T=true;break;default:var P=W[O.key];switch(O.condition){case -1:if(P){return false;}break;case 0:if(P){W[O.key]=-1;}break;case 1:if(!P){return false;}W[O.key]=-1;break;}}}}if(T){return true;}for(var V in W){if(W[V]>0){return false;}}return true;};var L={}.isPrototypeOf?function(N,M){return N.isPrototypeOf(M);}:function(N,M){for(var O=M.__proto__;O;O=O.__proto__){if(O===N){return true;}}return false;};function v(M){d.assign(this,M);if(!this.prototype){if(M.prototype){this.prototype=M.prototype;}else{this.prototype=null;}}if(!this.handlers){this.handlers=[];}}function l(M,N){this.selector=M;this.definition=N;}var o=s.rules=[];function y(O,P){var N=d.map(o,function(Q){return Q.selector;}).join(", ");var M=e.findAll(N,O);if(!P&&e.matches(O,N)){M.unshift(O);}return M;}var i=false;var p=false;d.assign(s,{registerElement:function(N,O){if(i){throw Error("sprockets management already started");}if(O.rules){console.warn("registerElement() does not support rules. Try registerComposite()");}var P=new v(O);var M=N+", [is="+N+"]";var Q=new l(M,P);o.push(Q);return Q;},start:function(M){if(i){throw Error("sprockets management has already started");}i=true;if(M&&M.manual){p=true;}K(c.body);if(!p){J(K,r);}},insertNode:function(O,N,R){if(!i){throw Error("sprockets management has not started yet");}if(!p){throw Error("Must not use sprockets.insertNode: auto DOM monitoring");}var S=N.ownerDocument;if(S!==c||!e.contains(c,N)){throw Error("sprockets.insertNode must insert into `document`");}if(S.adoptNode){R=S.adoptNode(R);}var M=[R];if(R.nodeType===11){M=d.map(R.childNodes);}switch(O){case"beforebegin":N.parentNode.insertBefore(R,N);break;case"afterend":N.parentNode.insertBefore(R,N.nextSibling);break;case"afterbegin":N.insertBefore(R,N.firstChild);break;case"beforeend":N.appendChild(R);break;case"replace":var Q=N.parentNode;var P=N.nextSibling;Q.removeChild(N);r(N);if(P){Q.insertBefore(R,P);}else{Q.appendChild(R);}break;default:throw Error("Unsupported configuration in sprockets.insertNode: "+O);}d.forEach(M,K);return R;},removeNode:function(M){if(!i){throw Error("sprockets management has not started yet");}if(!p){throw Error("Must not use sprockets.insertNode: auto DOM monitoring");}var N=M.ownerDocument;if(N!==c||!e.contains(c,M)){throw Error("sprockets.removeNode must remove from `document`");}M.parentNode.removeChild(M);r(M);return M;}});var K=function(Q){if(!i){throw Error("sprockets management has not started yet");}if(Q.nodeType!==1){return;}var P=y(Q);var N=[];d.forEach(P,function(S){d.some(o,function(T){if(!e.matches(S,T.selector)){return false;}var U=n(T.definition,S);if(U&&U.rules){N.push(S);}return true;});});d.forEach(P,function(S){D(S);});var R=s.getComposite(Q);if(R){M(Q,R);}while(R=N.shift()){M(R);}return;function M(T,W){if(!W){W=T;}var V=O(W);if(V.length<=0){return;}var U=G(T,false);var S;while(S=U.nextNode()){d.forEach(V,function(Y){var X=Y.selector;if(!e.matches(S,X)){return;}var Z=n(Y.definition,S);Y.callback.call(Z.object,S);});}}function O(U){var T=[];var S=e.getData(U);d.forEach(S.rules,function(W){if(!W.callback){return;}var V=d.assign({},W);V.composite=U;T.unshift(V);});return T;}};var r=function(N){if(!i){throw Error("sprockets management has not started yet");}if(N.nodeType!==1){return;}var M=e.findAll("*",N);M.unshift(N);d.forEach(M,m.leftDocumentCallback);};var J=(window.MutationObserver)?function(O,N){var M=new MutationObserver(function(P,Q){if(!i){return;}d.forEach(P,function(R){if(R.type!=="childList"){return;}d.forEach(R.addedNodes,O,s);d.forEach(R.removedNodes,N,s);});});M.observe(c.body,{childList:true,subtree:true});}:function(N,M){c.body.addEventListener("DOMNodeInserted",function(O){O.stopPropagation();if(!i){return;}if(O.target.parentNode!==O.relatedNode){return;}g.asap(function(){N(O.target);});},true);c.body.addEventListener("DOMNodeRemoved",function(O){O.stopPropagation();if(!i){return;}if(O.target.parentNode!==O.relatedNode){return;}g.asap(function(){M(O.target);});},true);};var E=function(M){var N=function(O){return s.cast(O,N);};N.prototype=M;return N;};d.assign(s,{registerSprocket:function(M,O,S){var Q={};var R;if(typeof M==="string"){d.assign(Q,{selector:M});R=c;}else{d.assign(Q,M);R=M.composite;delete Q.composite;}var N=e.getData(R);if(!N){N={};e.setData(R,N);}var P=N.rules;if(!P){P=N.rules=[];}Q.definition=O;Q.callback=S;P.unshift(Q);},register:function(N,M){return s.registerSprocket(N,M);},registerComposite:function(N,M){var O=d.assign({},M);var Q=O.rules;delete O.rules;if(!Q){console.warn("registerComposite() called without any sprocket rules. Try registerElement()");}var P=O.attached;O.attached=function(){var R=this;if(Q){d.forEach(Q,function(U){var S={composite:R.element};var T={};var V;if(Array.isArray(U)){S.selector=U[0];T=U[1];V=U[2];}else{S.selector=U.selector;T=U.definition;V=U.callback;}s.registerSprocket(S,T,V);});}if(P){return P.call(this);}};return s.registerElement(N,O);},registerComponent:function(N,M,P){var O={prototype:M.prototype};if(P){O.handlers=P.handlers;if(P.sprockets){d.forEach(P.sprockets,function(R){if(!O.rules){O.rules=[];}var Q={selector:R.matches,definition:R.sprocket,callback:R.enteredComponent};O.rules.push(Q);});}if(P.callbacks){d.defaults(O,P.callbacks);}}if(O.rules){return s.registerComposite(N,O);}else{return s.registerElement(N,O);}},evolve:function(P,N){var M=Object.create(P.prototype);var O=new E(M);var R=P.prototype.__properties__||{};var Q=M.__properties__={};d.forOwn(R,function(T,S){Q[S]=Object.create(T);});if(N){s.defineProperties(O,N);}return O;},defineProperties:function(M,P){var N=M.prototype;var O=N.__properties__||(N.__properties__={});d.forOwn(P,function(S,R){switch(typeof S){case"object":var Q=O[R]||(O[R]={});d.assign(Q,S);Object.defineProperty(N,R,{get:function(){throw Error("Attempt to get an ARIA property");},set:function(){throw Error("Attempt to set an ARIA property");}});break;default:N[R]=S;break;}});},getPropertyDescriptor:function(M,N){return M.prototype.__properties__[N];},_matches:function(N,M,O){var P=m.getInterface(N);if(P){return x(P.object,M);}if(O&&e.matches(N,O.selector)){return true;}return false;},matches:function(N,M,P){var Q;if(P){Q=s.getComposite(N);if(!Q){return false;}}var O=I(N.parentNode,M,P);return s._matches(N,M,O);},closest:function(N,M,Q){var R;if(Q){R=s.getComposite(N);if(!R){return;}}var P=I(N.parentNode,M,Q);for(var O=N;O&&O.nodeType===1;O=O.parentNode){if(s._matches(O,M,P)){return O;}if(O===R){return;}}},findAll:function(O,M){var N=[];var Q=I(O,M);if(!Q){return N;}var R=G(O,true);var P;while(P=R.nextNode()){if(e.matches(P,Q.selector)){N.push(P);}}return N;},find:function(N,M){var P=I(N,M);if(!P){return null;}var Q=G(N,true);var O;while(O=Q.nextNode()){if(e.matches(O,P.selector)){return O;}}return null;},cast:function(O,M){var N=s.getInterface(O);if(x(N,M)){return N;}throw Error("Attached sprocket is not compatible");},getInterface:function(M){var O=m.getInterface(M);if(O){return O.object;}var N=B(M);if(!N){throw Error("No sprocket declared");}var O=n(N.definition,M);return O.object;},isComposite:function(N){if(!e.hasData(N)){return false;}var M=e.getData(N);if(!M.rules){return false;}return true;},getComposite:function(M){for(var N=M;N;N=N.parentNode){if(s.isComposite(N)){return N;}}}});function B(N){var M;var O=s.getComposite(N);M=w(O,N);if(M){return M;}return w(c,N);}function w(P,O){var N;var M=e.getData(P);d.some(M.rules,function(Q){if(!e.matches(O,Q.selector)){return false;}N={composite:P};d.defaults(N,Q);return true;});if(N){return N;}}function I(O,M,P){var N;var Q=s.getComposite(O);N=H(Q,M);if(P||N){return N;}return H(c,M);}function H(P,M){var O;var N=e.getData(P);d.some(N.rules,function(Q){if(typeof M==="string"){if(Q.definition.prototype.role!==M){return false;}}else{if(M.prototype!==Q.definition.prototype&&!L(M.prototype,Q.definition.prototype)){return false;}}O={composite:P};d.defaults(O,Q);return true;});return O;}function x(N,M){if(typeof M==="string"){return(N.role===M);}else{return(M.prototype===N||L(M.prototype,N));}}function G(N,M){return c.createNodeIterator(N,1,O,null);function O(P){return(M&&P===N)?NodeFilter.FILTER_SKIP:s.isComposite(P)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT;}}var A={};s.Base=new E(A);return s;})();(function(){var j=b.stuff;var l=b.DOM;var h=b.sprockets,k=h.Base;j.assign(k.prototype,{find:function(m,n){return l.find(m,this.element,n);},findAll:function(m,n){return l.findAll(m,this.element,n);},matches:function(m,n){return l.matches(this.element,m,n);},closest:function(m,n){return l.closest(this.element,m,n);},contains:function(m){return l.contains(this.element,m);},attr:function(m,o){var n=this.element;if(typeof o==="undefined"){return n.getAttribute(m);}if(o==null){n.removeAttribute(m);}else{n.setAttribute(m,o);}},hasClass:function(n){var m=this.element;var o=m.getAttribute("class");if(!o){return false;}return j.includes(j.words(o),n);},addClass:function(o){var m=this.element;var q=m.getAttribute("class");if(!q){m.setAttribute("class",o);return;}if(j.includes(j.words(q),o)){return;}var r=q.length,p=(r&&q.charAt(r-1)!==" ")?" ":"";q+=p+o;m.setAttribute("class",q);},removeClass:function(n){var m=this.element;var q=m.getAttribute("class");if(!q){return;}var p=j.words(q);var o=[];j.forEach(p,function(r){if(r!==n){o.push(r);}});if(p.length===o.length){return;}m.setAttribute("class",o.join(" "));},toggleClass:function(m,o){var n=this.hasClass(m);if(n){if(o){return true;}this.removeClass(m);return false;}else{if(o===false){return false;}this.addClass(m);return true;}},css:function(n,p){var o=this.element;var m=(n.indexOf("-")>=0);if(typeof p==="undefined"){return m?o.style.getPropertyValue(n):o.style[n];}if(p==null||p===""){if(m){o.style.removeProperty(n);}else{o.style[n]="";}}else{if(m){o.style.setProperty(n,p);}else{o.style[n]=p;}}},trigger:function(m,n){return l.dispatchEvent(this.element,m,n);}});var i=window.Element||window.HTMLElement;Object.defineProperty(i.prototype,"$",{get:function(){return h.getInterface(this);}});})();(function(){var l=b.stuff;var n=b.DOM;var h=b.sprockets,m=h.Base;var k={hidden:false,selected:false,expanded:true};var o=h.evolve(m,{role:"roletype",aria:function(r,w){var s=this.element;var u=k[r];if(u==null){throw Error("No such aria property: "+r);}if(r==="hidden"){if(typeof w==="undefined"){return s.hasAttribute("hidden");}if(!w){s.removeAttribute("hidden");}else{s.setAttribute("hidden","");}return;}var v="aria-"+r;var t=typeof u;if(typeof w==="undefined"){var p=s.getAttribute(v);switch(t){case"string":default:return p;case"boolean":return p==="false"?false:p==null?undefined:true;}}if(w==null){s.removeAttribute(v);}else{switch(t){case"string":default:s.setAttribute(v,w);break;case"boolean":var q=w==="false"?"false":w===false?"false":"true";s.setAttribute(v,q);break;}}},ariaCan:function(p,q){var r=this.__properties__[p];if(!r){throw Error("Property not defined: "+p);}if(r.type!=="boolean"||r.can&&!r.can.call(this)){return false;}return true;},ariaToggle:function(q,r){var s=this.__properties__[q];if(!s){throw Error("Property not defined: "+q);}if(s.type!=="boolean"||s.can&&!s.can.call(this)){throw Error("Property can not toggle: "+q);}var p=s.get.call(this);if(typeof r==="undefined"){s.set.call(this,!p);}else{s.set.call(this,!!r);}return p;},ariaGet:function(p){var q=this.__properties__[p];if(!q){throw Error("Property not defined: "+p);}return q.get.call(this);},ariaSet:function(p,q){var r=this.__properties__[p];if(!r){throw Error("Property not defined: "+p);}return r.set.call(this,q);}});var j=h.evolve(o,{hidden:{type:"boolean",can:function(){return true;},get:function(){return this.aria("hidden");},set:function(p){this.aria("hidden",!!p);}}});h.ARIA=o;h.RoleType=j;h.register("*",j);var i=window.Element||window.HTMLElement;l.defaults(i.prototype,{aria:function(q,p){return this.$.aria(q,p);},ariaCan:function(p){return this.$.ariaCan(p);},ariaToggle:function(q,p){return this.$.ariaToggle(q,p);},ariaGet:function(p){return this.$.ariaGet(p);},ariaSet:function(q,p){return this.$.ariaSet(q,p);},ariaFind:function(p){return h.find(this,p);},ariaFindAll:function(p){return h.findAll(this,p);},ariaClosest:function(p){return h.closest(this,p);},ariaMatches:function(p){return h.matches(this,p);}});})();}).call(this);
/*!
 * scriptQueue
 * Copyright 2009-2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(c){var f=this;var h=f.document;var k=this.Meeko;var j=k.stuff;var g=k.Promise;var l=k.DOM;var d=[],i=false;var b=h.createElement("script"),a=(b.async===true);var e={push:function(m){return new g(function(A,B){if(i){throw Error("Attempt to append script to scriptQueue while emptying");}if(!m.type||/^text\/javascript$/i.test(m.type)){console.info("Attempt to queue already executed script "+m.src);A();return;}if(!/^text\/javascript\?disabled$/i.test(m.type)){console.info("Unsupported script-type "+m.type);A();return;}var z=h.createElement("script");if(m.src){x();}l.copyAttributes(z,m);z.text=m.text;if(z.getAttribute("defer")){z.removeAttribute("defer");z.setAttribute("async","");console.warn("@defer not supported on scripts");}if(a&&z.src&&!z.hasAttribute("async")){z.async=false;}z.type="text/javascript";var p=g.applyTo();var r=d[d.length-1],n=r&&r.script;var q;if(r){if(n.hasAttribute("async")||z.src&&a&&!z.hasAttribute("async")){q=r.enabled;}else{q=r.complete;}}else{q=g.resolve();}q.then(u,u);var s=g.applyTo();s.then(A,B);var w={script:z,complete:s,enabled:p};d.push(w);return;function u(){l.insertNode("replace",m,z);p.resolve();if(!z.src){o(d,w);s.resolve();}}function y(C){v();o(d,w);s.resolve();}function t(C){v();o(d,w);s.reject(function(){throw Error("Script loading failed");});}function x(){z.addEventListener("load",y,false);z.addEventListener("error",t,false);}function v(){z.removeEventListener("load",y,false);z.removeEventListener("error",t,false);}function o(C,E){for(var F=C.length,D=0;D<F;D++){if(C[D]!==E){continue;}C.splice(D,1);return;}}});},empty:function(){return new g(function(n,m){i=true;if(d.length<=0){i=false;n();return;}j.forEach(d,function(q,p){var o=function(){if(d.length<=0){i=false;n();}};q.complete.then(o,o);});});}};c.scriptQueue=e;}).call(this,this.Meeko);(function(){var e=this;var i=e.Meeko;var h=i.stuff;var f=i.URL;var k=i.DOM;var g=i.Promise;var j=(function(){try{var m=(new DOMParser).parseFromString("","text/html");return !!m;}catch(l){return false;}})();function b(n,l){var m=f(l.url);h.forEach(k.findAll("style",n.body),function(o){if(o.hasAttribute("scoped")){return;}n.head.appendChild(o);});h.forEach(k.findAll("style",n),function(p){var q=p.textContent;var o=0;q=q.replace(/\burl\(\s*(['"]?)([^\r\n]*)\1\s*\)/ig,function(t,r,s){absURL=m.resolve(s);if(absURL===s){return t;}o++;return"url("+r+absURL+r+")";});if(o){p.textContent=q;}});return c(n,m,false);}var d=f.attributes;var c=function(m,l){return g.pipe(null,[function(){var n=Object.keys(d).join(", ");return k.findAll(n,m);},function(n){return g.reduce(null,n,function(r,p){var o=k.getTagName(p);var q=d[o];h.forOwn(q,function(t,s){if(!p.hasAttribute(s)){return;}t.resolve(p,l);});});},function(){return m;}]);};var a=i.htmlParser=(function(){function m(o,n){return g.pipe(null,[function(){var p=(new DOMParser).parseFromString(o,"text/html");return b(p,n);}]);}function l(o,n){return g.pipe(null,[function(){var s=k.createHTMLDocument("");var q=s.documentElement;q.innerHTML=o;var p=o.match(/<html(?=\s|>)(?:[^>]*)>/i);var t=document.createElement("div");t.innerHTML=p[0].replace(/^<html/i,"<div");var r=t.firstChild;k.copyAttributes(q,r);return s;},function(p){return b(p,n);}]);}return{HTML_IN_DOMPARSER:j,parse:j?m:l,normalize:b};})();}).call(this);(function(){var c=this;var g=c.Meeko;var f=g.stuff;var d=g.URL;var h=g.DOM;var e=g.Promise;var b=g.htmlParser;var a=(function(){if(!c.XMLHttpRequest){return false;}var l=new XMLHttpRequest;if(!("responseType" in l)){return false;}if(!("response" in l)){return false;}l.open("get",document.URL,true);try{l.responseType="document";}catch(k){return false;}try{if(l.responseText==""){return false;}}catch(k){}try{if(l.status){return false;}}catch(k){l.abort();try{l.responseType="document";}catch(j){return false;}}return true;})();var i=g.httpProxy=(function(){var l=f.words("get");var s=f.words("document");var j={method:"get",responseType:"document"};var k=[];function t(y,v){var w=f.defaults({},y);var z;var x={invalid:false,request:w};if(e.isPromise(v)){x.response=v.then(m,function(A){x.invalid=true;x.response=null;});}else{x.response=m(v);}k.push(x);}function n(x){var w=f.find(k,function(y){if(!r(x,y)){return false;}return true;});if(!(w&&w.response)){return;}var v=w.response;if(e.isPromise(v)){return v.then(m);}else{return m(v);}}function r(w,v){if(v.invalid||v.response==null){return false;}if(w.url!==v.request.url){return false;}return true;}function m(v){var w=f.defaults({},v);w.document=h.cloneDocument(v.document);return w;}var u={HTML_IN_XHR:a,add:function(v){var w=v.url;if(!w){throw Error("Invalid url in response object");}if(!f.includes(s,v.type)){throw Error("Invalid type in response object");}var x={url:v.url};f.defaults(x,j);return e.pipe(undefined,[function(){return b.normalize(v.document,x);},function(y){v.document=y;t(x,v);}]);},load:function(v,w){var x={url:v};if(w){f.defaults(x,w);}f.defaults(x,j);if(!f.includes(l,x.method)){throw Error("method not supported: "+x.method);}if(!f.includes(s,x.responseType)){throw Error("responseType not supported: "+x.responseType);}return o(x);}};var o=function(x){var w=null;var y=f.lc(x.method);switch(y){case"post":throw Error("POST not supported");x.body=serialize(x.body,x.type);return p(x);break;case"get":var v=n(x);if(v){return e.resolve(v);}return p(x).then(function(z){t(x,z);return z;});break;default:throw Error(f.uc(y)+" not supported");break;}};var p=function(v){return new e(function(A,z){var D=v.method;var y=v.url;var x=v.body;var C=new XMLHttpRequest;C.onreadystatechange=w;C.open(D,y,true);if(a){C.responseType=v.responseType;if(v.responseType==="document"&&C.overrideMimeType){C.overrideMimeType("text/html");}}C.send(x);function w(){if(C.readyState!=4){return;}var E=new d(y).protocol;switch(E){case"http:":case"https:":switch(C.status){default:z(function(){throw Error("Unexpected status "+C.status+" for "+y);});return;case 200:break;}break;default:if(a?!C.response:!C.responseText){z(function(){throw Error("No response for "+y);});return;}break;}e.defer(B);}function B(){var E=q(C,v);A(E);}});};function q(x,w){var v={url:w.url,type:w.responseType,status:x.status,statusText:x.statusText};if(a){return b.normalize(x.response,w).then(function(y){v.document=y;return v;});}else{return b.parse(new String(x.responseText),w).then(function(y){v.document=y;return v;});}}return u;})();}).call(this);(function(){var e=this;var a=e.Meeko;var c=a.stuff;var f=a.Promise;var b=a.historyManager=(function(){var i={};var l="HyperFrameset";var k;var g;var h=false;c.defaults(i,{getState:function(){return k;},start:function(p,q,n,m,o){return d.now(function(){if(h){throw Error("historyManager has already started");}h=true;g=o;var r=j.create(p,q,n);if(history.replaceState){history.replaceState(r.settings,q,n);}k=r;return m(r);});},newState:function(o,p,n,m,q){return d.now(function(){var r=j.create(o,p,n);if(history.replaceState){if(m){history.replaceState(r.settings,p,n);}else{history.pushState(r.settings,p,n);}}k=r;if(q){return q(r);}});},replaceState:function(n,o,m,p){return this.newState(n,o,m,true,p);},pushState:function(n,o,m,p){return this.newState(n,o,m,false,p);}});if(history.replaceState){e.addEventListener("popstate",function(n){if(n.stopImmediatePropagation){n.stopImmediatePropagation();}else{n.stopPropagation();}var m=n.state;if(!m[l]){console.warn("Ignoring invalid PopStateEvent");return;}d.reset(function(){k=new j(m);if(!g){return;}return g(k);});},true);}function j(m){if(!m[l]){throw Error("Invalid settings for new State");}this.settings=m;}j.create=function(p,q,n){var m=+(new Date);var o={title:q,url:n,timeStamp:m,data:p};o[l]=true;return new j(o);};c.defaults(j.prototype,{getData:function(){return this.settings.data;},update:function(n,o){var m=this;return f.resolve(function(){if(m!==k){throw Error("Cannot update state: not current");}return d.now(function(){if(history.replaceState){history.replaceState(m.settings,title,url);}return o(m);});});}});return i;})();var d=(function(){var g=[];var l=1;var j=false;function h(){if(j){return;}j=true;k();}function k(){if(g.length<=0){j=false;return;}var m=g.shift();var n=f.defer(m.fn);n.then(k,k);n.then(m.resolve,m.reject);}var i={now:function(n,m){return this.whenever(n,m,0);},reset:function(m){g.length=0;return this.whenever(m,null,1);},whenever:function(o,n,m){return new f(function(q,p){if(m==null){m=l;}if(g.length>m||(g.length===m&&j)){if(n){f.defer(n).then(q,p);}else{p(function(){throw Error("No `fail` callback passed to whenever()");});}return;}g.push({fn:o,resolve:q,reject:p});h();});}};return i;})();}).call(this);(function(){var e=this;var b=e.Meeko;var d=b.stuff;var a=b.CustomNamespace=(function(){function f(h){if(!(this instanceof f)){return new f(h);}if(!h){return;}var i=h.style=d.lc(h.style);var k=d.find(f.namespaceStyles,function(m){return m.style===i;});if(!k){throw Error("Unexpected namespace style: "+i);}var g=h.name=d.lc(h.name);if(!g){throw Error("Unexpected name: "+g);}var l=this;d.assign(l,h);var j=k.separator;l.prefix=l.name+j;l.selectorPrefix=l.name+(j===":"?"\\:":j);}d.defaults(f.prototype,{clone:function(){var g=new f();d.assign(g,this);return g;},lookupTagName:function(g){return this.prefix+g;},lookupSelector:function(g){var i=this.selectorPrefix;var h=g.split(/\s*,\s*|\s+/);return d.map(h,function(j){return i+j;}).join(", ");}});f.namespaceStyles=[{style:"vendor",configNamespace:"custom",separator:"-"},{style:"xml",configNamespace:"xmlns",separator:":"}];d.forOwn(f.namespaceStyles,function(g){g.configPrefix=g.configNamespace+g.separator;});f.getNamespaces=function(g){return new c(g);};return f;})();var c=b.NamespaceCollection=function(f){if(!(this instanceof c)){return new c(f);}this.items=[];if(!f){return;}this.init(f);};d.assign(c.prototype,{init:function(g){var f=this;d.forEach(d.map(g.documentElement.attributes),function(h){var k=d.lc(h.name);var j=d.find(a.namespaceStyles,function(m){return(k.indexOf(m.configPrefix)===0);});if(!j){return;}var i=k.substr(j.configPrefix.length);var l=new a({urn:h.value,name:i,style:j.style});f.add(l);});},clone:function(){var f=new c();d.forEach(this.items,function(g){f.items.push(g.clone());});return f;},add:function(h){var f=this;var g=d.find(f.items,function(i){if(d.lc(i.urn)===d.lc(h.urn)){if(i.prefix!==h.prefix){console.warn("Attempted to add namespace with same urn as one already present: "+i.urn);}return true;}if(i.prefix===h.prefix){if(d.lc(i.urn)!==d.lc(h.urn)){console.warn("Attempted to add namespace with same prefix as one already present: "+i.prefix);}return true;}});if(g){return;}f.items.push(h);},lookupNamespace:function(f){var g=this;f=d.lc(f);var h=d.find(g.items,function(i){return(d.lc(i.urn)===f);});return h;},lookupPrefix:function(f){var g=this;var h=g.lookupNamespace(f);return h&&h.prefix;},lookupNamespaceURI:function(g){var f=this;g=d.lc(g);var h=d.find(f.items,function(i){return(i.prefix===g);});return h&&h.urn;},lookupTagNameNS:function(g,f){var h=this;var i=h.lookupNamespace(f);if(!i){return g;}return i.prefix+g;},lookupSelector:function(f,g){var h=this.lookupNamespace(g);if(!h){return f;}return h.lookupSelector(f);}});}).call(this);(function(e){var d=this;var a=d.Meeko;var c=a.stuff;var b=function(f){if(!f||typeof f!=="object"){f={};}this.options=f;this.items={};};c.assign(b.prototype,{clear:function(){if(this.options.writeOnce){throw Error("Attempted to clear write-once storage");}this.items=Object.create(null);},has:function(f){return f in this.items;},get:function(f){return this.items[f];},set:function(g,h){if(this.options.writeOnce&&this.has(g)){throw Error("Attempted to rewrite key "+g+" in write-once storage");}if(this.options.keyTest){var f=this.options.keyTest(g);if(!f){throw Error("Invalid key "+g+" for storage");}}if(this.options.valueTest){var f=this.options.valueTest(h);if(!f){throw Error("Invalid value "+h+" for storage");}}this.items[g]=h;},"delete":function(f){if(this.options.writeOnce&&this.has(f)){throw Error("Attempted to delete key "+f+" in write-once storage");}delete this.items[f];}});b.prototype.register=b.prototype.set;e.Registry=b;}).call(this,this.Meeko);Meeko.stuff.dateFormat=(function(){var a=function(){var b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e=/[^-+\dA-Z]/g,d=function(g,f){g=String(g);f=f||2;while(g.length<f){g="0"+g;}return g;};return function(j,w,r){var h=a;if(arguments.length==1&&Object.prototype.toString.call(j)=="[object String]"&&!/\d/.test(j)){w=j;j=undefined;}j=j?new Date(j):new Date;if(isNaN(j)){throw SyntaxError("invalid date");}w=String(h.masks[w]||w||h.masks["default"]);if(w.slice(0,4)=="UTC:"){w=w.slice(4);r=true;}var u=r?"getUTC":"get",n=j[u+"Date"](),f=j[u+"Day"](),k=j[u+"Month"](),q=j[u+"FullYear"](),t=j[u+"Hours"](),l=j[u+"Minutes"](),v=j[u+"Seconds"](),p=j[u+"Milliseconds"](),g=r?0:j.getTimezoneOffset(),i={d:n,dd:d(n),ddd:h.i18n.dayNames[f],dddd:h.i18n.dayNames[f+7],m:k+1,mm:d(k+1),mmm:h.i18n.monthNames[k],mmmm:h.i18n.monthNames[k+12],yy:String(q).slice(2),yyyy:q,h:t%12||12,hh:d(t%12||12),H:t,HH:d(t),M:l,MM:d(l),s:v,ss:d(v),l:d(p,3),L:d(p>99?Math.round(p/10):p),t:t<12?"a":"p",tt:t<12?"am":"pm",T:t<12?"A":"P",TT:t<12?"AM":"PM",Z:r?"UTC":(String(j).match(c)||[""]).pop().replace(e,""),o:(g>0?"-":"+")+d(Math.floor(Math.abs(g)/60)*100+Math.abs(g)%60,4),S:["th","st","nd","rd"][n%10>3?0:(n%100-n%10!=10)*n%10]};return w.replace(b,function(m){return m in i?i[m]:m.slice(1,m.length-1);});};}();a.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return a;}).call(window);(function(f){var e=this;var a=e.Meeko;var c=a.stuff;var b=a.Registry;var d=new b({writeOnce:true,testKey:function(g){return/^[_a-zA-Z][_a-zA-Z0-9]*$/.test(g);},testValue:function(g){return typeof g==="function";}});c.assign(d,{evaluate:function(h,j,k){var i=this.get(h);var g=k.slice(0);g.unshift(j);return i.apply(undefined,g);}});f.filters=d;}).call(this,this.Meeko);(function(){var d=this;var a=d.Meeko;var b=a.stuff;var c=a.filters;c.register("lowercase",function(e,f){return e.toLowerCase();});c.register("uppercase",function(e,f){return e.toUpperCase();});c.register("if",function(f,e){return(!!f)?e:f;});c.register("unless",function(e,f){return(!e)?f:e;});c.register("if_unless",function(f,e,g){return(!!f)?e:g;});c.register("map",function(g,h){if(Array.isArray(h)){var f=b.filter(h,function(k,j){return !(j%2);});var e=b.filter(h,function(k,j){return !!(j%2);});b.some(f,function(k,j){if(!(k instanceof RegExp)){k=new RegExp("^"+k+"$");}if(!k.test(g)){return false;}g=e[j];return true;});return g;}if(g in h){return h[g];}return g;});c.register("match",function(h,g,f,i){if(!(g instanceof RegExp)){g=new RegExp("^"+g+"$");}var e=g.test(h);if(f!=null&&e){return f;}if(i!=null&&!e){return i;}return e;});c.register("replace",function(f,e,g){return f.replace(e,g);});if(b.dateFormat){c.register("date",function(f,g,e){return b.dateFormat(f,g,e);});}}).call(this);(function(f){var e=this;var a=e.Meeko;var c=a.stuff;var b=a.Registry;var d=new b({writeOnce:true,testKey:function(g){return typeof g==="string"&&/^[_a-zA-Z][_a-zA-Z0-9]*/.test(g);},testValue:function(g){return typeof g==="function";}});c.assign(d,{create:function(i,g,j){var h=this.get(i);return new h(g,j);}});f.decoders=d;}).call(this,this.Meeko);(function(f){var a=this;var k=a.Meeko;var j=k.stuff;var l=k.DOM;var i=k.decoders;var h="_text";var b="_html";CSS_CONTEXT_VARIABLE="_";function d(m,n){}j.defaults(d.prototype,{init:function(m){this.srcNode=m;},matches:function(r,t){var q=t.match(/^\s*([^{]*)\s*(?:\{\s*([^}]*)\s*\}\s*)?$/);var o=q[1];var n=q[2];var m;if(!e(r,o)){return;}var s=r;var m=s;if(n){n=n.trim();if(n.charAt(0)==="@"){n=n.substr(1);}m=p(s,n);}return m;function p(v,u){switch(u){case null:case undefined:case"":return v;case h:return v.textContent;case b:var w=doc.createDocumentFragment();j.forEach(v.childNodes,function(x){w.appendChild(doc.importNode(x,true));});return w;default:return v.getAttribute(u);}}},evaluate:function(q,m,t,r){if(!m){m=this.srcNode;}var s=m.nodeType===9?m:m.ownerDocument;var u=q.match(/^\s*([^{]*)\s*(?:\{\s*([^}]*)\s*\}\s*)?$/);var n=u[1];var p=u[2];var v=g(n,m,t,r);if(p){p=p.trim();if(p.charAt(0)==="@"){p=p.substr(1);}if(!r){v=[v];}v=j.map(v,function(w){return o(w,p);});if(!r){v=v[0];}}return v;function o(x,w){switch(w){case null:case undefined:case"":return x;case h:return x.textContent;case b:var y=s.createDocumentFragment();j.forEach(x.childNodes,function(z){y.appendChild(s.importNode(z,true));});return y;default:return x.getAttribute(w);}}}});function e(m,n){if(n.trim()===""){return;}return l.matches(m,n);}function g(q,o,v,t){q=q.trim();if(q===""){return t?[o]:o;}var n=t?[]:null;var u=q.split(/,(?![^\(]*\)|[^\[]*\])/);u=j.map(u,function(w){return w.trim();});var p=false;var r;j.forEach(u,function(y,x){var w=y.match(/\\?\$[_a-zA-Z][_a-zA-Z0-9]*\b/g);if(!w){if(x>0&&r){p=true;console.warn("All individual selectors in a selector-group must share same context: "+q);}return;}j.forEach(w,function(A,z){if(A.charAt(0)==="\\"){return;}var C=A.substr(1);var B=y.indexOf(A);if(z>0||B>0){p=true;console.warn("Invalid use of "+A+" in "+q);return;}if(x>0){if(C!==r){p=true;console.warn("All individual selectors in a selector-group must share same context: "+q);}return;}r=C;});});if(p){console.error("Invalid use of variables in CSS selector. Assuming no match.");return n;}if(r&&r!==CSS_CONTEXT_VARIABLE){if(!v.has(r)){console.debug("Context variable $"+r+" not defined for "+q);return n;}if(r!==CSS_CONTEXT_VARIABLE){o=v.get(r);}if(q==="$"+r){return o;}if(!(o&&o.nodeType===1)){console.debug("Context variable $"+r+" not an element in "+q);return n;}}var s=false;if(o.nodeType===9||o.nodeType===11){s=true;}u=j.filter(u,function(w){switch(w.charAt(0)){case"+":case"~":console.warn("Siblings of context-node cannot be selected in "+q);return false;case">":return(s)?false:true;default:return true;}});if(u.length<=0){return n;}u=j.map(u,function(w){if(s){return w;}var x=":scope";return(r)?w.replace("$"+r,x):x+" "+w;});var m=u.join(", ");if(t){return l.findAll(m,o,!s,!s);}else{return l.find(m,o,!s,!s);}}function c(n){if(n.hasAttribute(l.uniqueIdAttr)){return n.getAttribute(l.uniqueIdAttr);}var m=l.uniqueId(n);n.setAttribute(l.uniqueIdAttr,m);return m;}j.assign(f,{CSSDecoder:d});}).call(this,this.Meeko);(function(b){var c=this;var d=c.document;var h=c.Meeko;var g=h.stuff;var i=h.DOM;var e=h.decoders;var f=(function(){function k(D,C){return g.some(D,function(E){return g.some(C,function(F){return F===E;});});}function m(D,C,H){var G=d.createNodeIterator(D,1,E,null);var F;while(F=G.nextNode()){}function E(I){if(C&&I===D){return NodeFilter.FILTER_SKIP;}return H(I);}}var B="__microdata__";var A=0;var s={};var q=function(C){var D=C[B];if(D){return D;}D=A++;C[B]=new String(D);return D;};var n=function(C,D){var E=q(C);s[E]=D;};var z=function(C){var D=C[B];return !D?false:D in s;};var t=function(C){var D=C[B];if(!D){return;}return s[D];};function j(C,F){if(!z(C)){w(C);}var E=t(C);var G=(typeof F==="string")?g.words(F.trim()):F&&F.length?F:[];var D=[];g.forEach(E.properties.names,function(I){var H=E.properties.namedItem(I);g.forEach(H,function(J){if(J.isScope){[].push.apply(D,j(J.element,G));}});});g.forEach(E.childScopes,function(H){if(!G.length||k(H.type,G)){D.push(H);}[].push.apply(D,j(H.element,G));});g.forEach(D,function(I,H){D[H]=I.element;});return D;}function v(C){if(!z(C)){return;}var D=t(C);if(!D.isScope){return;}return D.properties;}function w(C){if(!C){C=d;}var D=r(C);}function r(D){if(z(D)){return t(D);}var C={element:D,isScope:true,type:D.nodeType===1||g.words(D.getAttribute("itemtype")),properties:u(),childScopes:[]};m(D,true,function(E){var H=E.hasAttribute("itemscope");var G=E.getAttribute("itemprop");if(!(H||G)){return NodeFilter.FILTER_SKIP;}var F=H?r(E):o(E);if(G){C.properties.addNamedItem(G,E);}else{C.childScopes.push(E);}return H?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT;});n(D,C);return C;}function l(C){if(z(C)){return t(C).value;}var D=o(C);n(C,D);return D.value;}function o(D){if(z(D)){return t(D);}var C=D.getAttribute("itemprop");var E={name:C,value:x(D)};n(D,E);return E;}function x(E){var D=E.tagName.toLowerCase();var C=p[D];if(C){return E[C]||E.getAttribute(C);}return E;}function u(){var C=[];C.names=[];C.nodeLists={};g.assign(C,y.prototype);return C;}var y=function(){};g.assign(y.prototype,{namedItem:function(C){return this.nodeLists[C];},addNamedItem:function(C,D){this.push(D);if(!this.nodeLists[C]){this.nodeLists[C]=[];this.names.push(C);}this.nodeLists[C].push(D);}});var p={};g.forEach(g.words("meta@content link@href a@href area@href img@src video@src audio@src source@src track@src iframe@src embed@src object@data time@datetime data@value meter@value"),function(F){var C=F.split("@"),E=C[0],D=C[1];p[E]=D;});return{getItems:j,getProperties:v,getValue:l};})();function a(j,k){}g.defaults(a.prototype,{init:function(j){f.getItems(j);this.rootNode=j;},evaluate:function(o,k,s,p){if(!k){k=this.rootNode;}var o=o.trim();var q=false;var r;var t;if(o==="."){return(p)?[k]:k;}var l=o.match(/^(?:(\^)?\[([^\]]*)\]\.)/);if(l&&l.length){o=o.substr(l[0].length);q=!!l[1];r=g.words(l[2].trim());}t=g.words(o.trim());var j;if(r){if(q){k=this.view;}j=f.getItems(k,r);}else{j=[k];}var n=j;g.forEach(t,function(v,u){var m=n;n=[];g.forEach(m,function(y){var x=f.getProperties(y);if(!x){return;}var w=x.namedItem(v);if(!w){return;}[].push.apply(n,w);});});n=g.map(n,function(u){var m=f.getProperties(u);if(m){return u;}return f.getValue(u);});if(p){return n;}return n[0];}});g.assign(b,{Microdata:f,MicrodataDecoder:a});}).call(this,this.Meeko);(function(g){var e=this;var a=e.Meeko;var b=a.stuff;var d=a.DOM;var c=a.decoders;function f(h,i){}b.defaults(f.prototype,{init:function(h){if(typeof h!=="object"||h===null){throw"JSONDecoder cannot handle non-object";}this.object=h;},evaluate:function(o,j,p,n){if(!j){j=this.object;}var o=o.trim();var k;if(o==="."){return(n)?[j]:j;}var h=o.match(/^\^/);if(h&&h.length){o=o.substr(h[0].length);j=this.object;}k=o.split(".");var i=[j];b.forEach(k,function(r,q){var m=i;i=[];b.forEach(m,function(s){var t=s[r];if(t!=null){if(Array.isArray(t)){[].push.apply(i,t);}else{i.push(t);}}});});if(n){return i;}var l=i[0];return l;}});b.assign(g,{JSONDecoder:f});}).call(this,this.Meeko);(function(g){var d=this;var a=d.Meeko;var c=a.decoders;var f=a.CSSDecoder;c.register("css",f);var b=a.MicrodataDecoder;c.register("microdata",b);var e=a.JSONDecoder;c.register("json",e);}).call(this,this.Meeko);
/*!
 * HyperFrameset Processors
 * Copyright 2014-2015 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(f){var e=this;var a=e.Meeko;var d=a.stuff;var c=a.Registry;var b=new c({writeOnce:true,testKey:function(g){return typeof g==="string"&&/^[_a-zA-Z][_a-zA-Z0-9]*/.test(g);},testValue:function(g){return typeof g==="function";}});d.assign(b,{create:function(i,g,j){var h=this.get(i);return new h(g,j);}});f.processors=b;}).call(this,this.Meeko);
/*!
 * MainProcessor
 * Copyright 2014-2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(g){var e=this;var a=e.Meeko;var c=a.stuff;var d=a.DOM;var b=a.processors;function f(h){}c.defaults(f.prototype,{loadTemplate:function(h){if(/\S+/.test(h.textContent)){console.warn('"main" transforms do not use templates');}},transform:function(m,j){var l=m.srcNode;var i=l.nodeType===9?l:l.ownerDocument;var h;if(!h){h=d.find("main, [role=main]",l);}if(!h&&l===i){h=i.body;}if(!h){h=l;}var n=i.createDocumentFragment();var k;while(k=h.firstChild){n.appendChild(k);}return n;}});c.assign(g,{MainProcessor:f});}).call(this,this.Meeko);
/*!
 * ScriptProcessor
 * Copyright 2014-2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(h){var f=this;var a=f.Meeko;var c=a.stuff;var e=a.DOM;var g=a.Task;var b=a.processors;function d(i){this.processor=i;}c.defaults(d.prototype,{loadTemplate:function(j){var i;c.forEach(c.map(j.childNodes),function(l){switch(l.nodeType){case 1:switch(e.getTagName(l)){case"script":if(i){console.warn('Ignoring secondary <script> in "script" transform template');}else{i=l;}return;default:console.warn('Ignoring unexpected non-<script> element in "script" transform template');return;}break;case 3:if(/\S+/.test(l.nodeValue)){console.warn('"script" transforms should not have non-empty text-nodes');}return;case 8:return;default:console.warn('Unexpected node in "script" transform template');return;}});if(!i){if(this.processor){return;}console.warn('No <script> found in "script" transform template');return;}try{this.processor=(Function("return ("+i.text+")"))();}catch(k){g.postError(k);}if(!this.processor||!this.processor.transform){console.warn('"script" transform template did not produce valid transform object');return;}},transform:function(k,i){var j=k.srcNode;if(!this.processor||!this.processor.transform){console.warn('"script" transform template did not produce valid transform object');return;}return this.processor.transform(j,i);}});c.assign(h,{ScriptProcessor:d});}).call(this,this.Meeko);
/*!
 * HazardProcessor
 * Copyright 2014-2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(b){var F=this;var e=F.document;var w=F.Meeko;var N=w.stuff;var t=w.DOM;var v=w.Task;var A=w.Promise;var p=w.filters;var o=w.processors;var B=w.CustomNamespace;var D="_text";var l="_html";var a="//>";var C="hyperframeset";var H=!(F.HTMLUnknownElement&&"runtimeStyle" in F.HTMLUnknownElement.prototype);var m="HazardTransform";var r=new B({urn:m,name:"haz",style:"xml"});var h="HazardExpression";var G=new B({urn:h,name:"expr",style:"xml"});var f="HazardMExpression";var i=new B({urn:f,name:"mexpr",style:"xml"});var u=[{tag:"*",attr:"style",description:"an element with @style"},{tag:"li",attr:"value",description:"a <li> element with @value"},{tag:undefined,description:"an unknown or custom element"}];function y(O,P){var S=P.lookupPrefix(h);var R=P.lookupPrefix(f);var Q;N.forEach(u,function(T){switch(T.tag){case undefined:case null:if(O.toString()!=="[object HTMLUnknownElement]"){return;}break;default:if(t.getTagName(O)!==T.tag){return;}case"*":case"":if(N.every(["",S,R],function(V){var U=V+T.attr;return !O.hasAttribute(U);})){return;}break;}if(!Q){Q=O.cloneNode(false).outerHTML;}console.debug("Found "+T.description+":\n\t\t"+Q+"\n\tThis can cause poor performance on IE / Edge.");});}var M="<otherwise <when@test <each@select <one@select +var@name,select <if@test <unless@test >choose <template@name,match >eval@select >mtext@select >text@select call@name apply param@name,select clone deepclone element@name attr@name";var L=N.map(N.words(M),function(R){R=R.split("@");var O=R[0];var Q=O.charAt(0);switch(Q){default:Q=false;break;case"<":case">":case"+":break;}if(Q){O=O.substr(1);}var P=R[1];P=(P&&P!=="")?P.split(","):[];return{tag:O,attrToElement:Q,attrs:P};});var c={};N.forEach(L,function(P){var O=P.tag;c[O]=P;});function j(P,O,T){var S=e.createNodeIterator(P,1,Q,null);var R;while(R=S.nextNode()){T(R);}function Q(U){if(O&&U===P){return NodeFilter.FILTER_SKIP;}return NodeFilter.FILTER_ACCEPT;}}function K(O){var P=O.ownerDocument;var Q=P.createDocumentFragment();N.forEach(N.map(O.childNodes),function(R){Q.appendChild(R);});return Q;}function n(P,Q){if(!Q){Q=e;}var R=Q.createElement("div");R.innerHTML=P;var O=K(R);return O;}function k(O,P){this.templates=[];this.namespaces=P=P.clone();if(!P.lookupNamespace(m)){P.add(r);}if(!P.lookupNamespace(h)){P.add(G);}if(!P.lookupNamespace(f)){P.add(i);}}N.defaults(k.prototype,{loadTemplate:function(af){var R=this;R.root=af;R.templates=[];var W=R.namespaces;var U=W.lookupPrefix(m);var ac=W.lookupPrefix(h);var ab=W.lookupPrefix(f);var ad=ac+l;var ae=U+"eval";var Z=ab+l;var ag=ab+D;var V=U+"mtext";var P=ac+D;var S=U+"text";var Q=[ad,ag,P];var Y={};Y[ad]=ae;Y[ag]=V;Y[P]=S;var ah=af.ownerDocument;j(af,true,function(aj){var ai=t.getTagName(aj);if(ai.indexOf(U)===0){return;}N.forEach(Q,function(al){if(!aj.hasAttribute(al)){return;}var ak=Y[al];var am=aj.getAttribute(al);aj.removeAttribute(al);aj.setAttribute(ak,am);});if(aj.hasAttribute(Z)){console.warn("Removing unsupported @"+Z);aj.removeAttribute(Z);}N.forEach(L,function(ao){if(!ao.attrToElement){return;}var ak=U+ao.tag;if(!aj.hasAttribute(ak)){return;}var an=ah.createElement(ak);var al=ao.attrs[0];var am=aj.getAttribute(ak);aj.removeAttribute(ak);if(al){an.setAttribute(al,am);}N.forEach(ao.attrs,function(aq,ar){if(ar===0){return;}var au=U+aq;if(!aj.hasAttribute(au)){return;}var at=aj.getAttribute(au);aj.removeAttribute(au);an.setAttribute(aq,at);});switch(ao.attrToElement){case">":var ap=K(aj);an.appendChild(ap);aj.appendChild(an);break;case"<":aj.parentNode.replaceChild(an,aj);an.appendChild(aj);break;case"+":aj.parentNode.insertBefore(an,aj);break;default:break;}});});j(af,true,function(aj){var ai=t.getTagName(aj);if(ai===U+"template"){X(aj);}if(ai===U+"choose"){T(aj);}});O(af);j(af,true,function(ai){ai.hazardDetails=z(ai,R.namespaces);});if(console.logLevel!=="debug"){return;}var aa=R.namespaces.lookupNamespace(C);j(af,true,function(aj){var ai=t.getTagName(aj);if(ai.indexOf(U)===0){return;}if(ai.indexOf(aa.prefix)===0){return;}y(aj,W);});function T(aj){var ai=aj.ownerDocument.createElement(U+"otherwise");N.forEach(N.map(aj.childNodes),function(al){var ak=t.getTagName(al);if(ak===U+"when"){return;}ai.appendChild(al);});aj.appendChild(ai);}function X(ai){R.templates.push(ai);}function O(ak){var ai;var al=N.filter(ak.childNodes,function(an){var am=t.getTagName(an);if(am===U+"template"){if(!ai){ai=an;}return false;}if(am===U+"var"){return false;}if(am===U+"param"){return false;}if(an.nodeType===3&&!(/\S/).test(an.nodeValue)){return false;}if(an.nodeType!==1){return false;}return true;});if(al.length<=0){if(ai){return;}console.warn("This Hazard Template cannot generate any content.");}var aj=ak.ownerDocument.createElement(U+"template");N.forEach(al,function(am){aj.appendChild(am);});if(ai){ak.insertBefore(aj,ai);}else{ak.appendChild(aj);}R.templates.unshift(aj);}},getEntryTemplate:function(){return this.templates[0];},getNamedTemplate:function(O){var P=this;O=N.lc(O);return N.find(P.templates,function(Q){return N.lc(Q.getAttribute("name"))===O;});},getMatchingTemplate:function(O){var P=this;return N.find(P.templates,function(Q){if(!Q.hasAttribute("match")){return false;}var R=Q.getAttribute("match");return P.provider.matches(O,R);});},transform:H?function(S,P){var Q=this;var O=Q.root;var R=O.ownerDocument;var T=R.createDocumentFragment();return Q._transform(S,P,T).then(function(){return T;});}:function(S,P){var Q=this;var O=Q.root;var R=t.createHTMLDocument("",O.ownerDocument);var T=R.body;return Q._transform(S,P,T).then(function(){T=K(T);return T;});},_transform:function(Q,O,R){var P=this;P.provider=Q;P.globalParams=N.assign({},O);P.globalVars={};P.localParams=P.globalParams;P.localVars=P.globalVars;P.localParamsStack=[];P.localVarsStack=[];P.variables={has:function(T){var S=T in P.localVars||T in P.localParams||T in P.globalVars||T in P.globalParams||false;return S;},get:function(T){var S=T in P.localVars&&P.localVars[T]||T in P.localParams&&P.localParams[T]||T in P.globalVars&&P.globalVars[T]||T in P.globalParams&&P.globalParams[T]||undefined;return S;},set:function(U,W,T,S){var V=S?(T?"globalParams":"globalVars"):(T?"localParams":"localVars");if(V==="localParams"&&U in P.localParams){return;}if(V==="globalParams"&&U in P.globalParams){return;}P[V][U]=W;},push:function(S){P.localParamsStack.push(P.localParams);P.localVarsStack.push(P.localVars);if(typeof S!=="object"||S==null){S={};}P.localParams=S;P.localVars={};},pop:function(){P.localParams=P.localParamsStack.pop();P.localVars=P.localVarsStack.pop();}};return P.transformChildNodes(P.root,null,R).then(function(){var S=P.getEntryTemplate();return P.transformTemplate(S,null,null,R);});},transformTemplate:function(Q,O,R,S){var P=this;P.variables.push(R);return P.transformChildNodes(Q,O,S).then(function(){P.variables.pop();return S;});},transformChildNodes:function(Q,O,R){var P=this;return A.reduce(null,Q.childNodes,function(T,S){return P.transformNode(S,O,R);});},transformNode:function(S,P,T){var Q=this;switch(S.nodeType){default:var R=S.cloneNode(true);T.appendChild(R);return;case 3:var R=S.cloneNode(true);T.appendChild(R);return;case 1:var O=S.hazardDetails;if(O.definition){return Q.transformHazardTree(S,P,T);}else{return Q.transformTree(S,P,T);}}},transformHazardTree:function(Q,S,P){var T=this;var al=Q.ownerDocument;var aj=Q.hazardDetails;var ad=aj.definition;var aa=false;switch(ad.tag){default:return T.transformChildNodes(Q,S,P);case"template":return P;case"var":var am=Q.getAttribute("name");var ai=Q.getAttribute("select");var ag=S;if(ai){try{ag=T.provider.evaluate(ai,S,T.variables,false);}catch(V){v.postError(V);console.warn('Error evaluating <haz:var name="'+am+'" select="'+ai+'">. Assumed empty.');ag=undefined;}}T.variables.set(am,ag);return P;case"param":var am=Q.getAttribute("name");var ai=Q.getAttribute("select");var ag=S;if(ai){try{ag=T.provider.evaluate(ai,S,T.variables,false);}catch(V){v.postError(V);console.warn('Error evaluating <haz:param name="'+am+'" select="'+ai+'">. Assumed empty.');ag=undefined;}}T.variables.set(am,ag,true);return P;case"call":var am=Q.getAttribute("name");var ak=T.getNamedTemplate(am);if(!ak){console.warn("Hazard could not find template name="+am);return P;}return T.transformTemplate(ak,S,null,P);case"apply":var ak=T.getMatchingTemplate(S);var af=A.resolve(Q);if(ak){return T.transformTemplate(ak,S,null,P);}var ah=S.cloneNode(false);P.appendChild(ah);return A.reduce(null,S.childNodes,function(an,ao){return T.transformHazardTree(Q,ao,ah);});case"clone":var ah=S.cloneNode(false);P.appendChild(ah);return T.transformChildNodes(Q,S,ah);case"deepclone":var ah=S.cloneNode(true);P.appendChild(ah);return P;case"element":var Z=Q.getAttribute("name");var am=s(Z,T.provider,S,T.variables);var U=typeof ag;if(U!=="string"){return P;}var ah=al.createElement(am);P.appendChild(ah);return T.transformChildNodes(Q,S,ah);case"attr":var Z=Q.getAttribute("name");var am=s(Z,T.provider,S,T.variables);var U=typeof ag;if(U!=="string"){return P;}var ah=al.createDocumentFragment();return T.transformChildNodes(Q,S,ah).then(function(){ag=ah.textContent;P.setAttribute(am,ag);return P;});case"eval":var ai=Q.getAttribute("select");var ag=x(ai,T.provider,S,T.variables,"node");var U=typeof ag;if(U==="undefined"||U==="boolean"||ag==null){return P;}if(!ag.nodeType){ag=n(ag,al);}P.appendChild(ag);return P;case"mtext":var Z=Q.getAttribute("select");var ag=s(Z,T.provider,S,T.variables);if(U==="undefined"||U==="boolean"||ag==null){return P;}if(!ag.nodeType){ag=al.createTextNode(ag);}P.appendChild(ag);return P;case"text":var R=Q.getAttribute("select");var ag=x(R,T.provider,S,T.variables,"text");var U=typeof ag;if(U==="undefined"||U==="boolean"||ag==null){return P;}if(!ag.nodeType){ag=al.createTextNode(ag);}P.appendChild(ag);return P;case"unless":aa=true;case"if":var Y=Q.getAttribute("test");var O=false;try{O=x(Y,T.provider,S,T.variables,"boolean");}catch(V){v.postError(V);console.warn('Error evaluating <haz:if test="'+Y+'">. Assumed false.');O=false;}if(aa){O=!O;}if(!O){return P;}return T.transformChildNodes(Q,S,P);case"choose":var ae;var W;var ac=N.some(Q.childNodes,function(aq){if(aq.nodeType!==1){return false;}var ap=aq.hazardDetails.definition;if(!ap){return false;}if(ap.tag==="otherwise"){if(!ae){ae=aq;}return false;}if(ap.tag!=="when"){return false;}var an=aq.getAttribute("test");var ao=x(an,T.provider,S,T.variables,"boolean");if(!ao){return false;}W=aq;return true;});if(!ac){W=ae;}if(!W){return P;}return T.transformChildNodes(W,S,P);case"one":var ai=Q.getAttribute("select");var ab;try{ab=T.provider.evaluate(ai,S,T.variables,false);}catch(V){v.postError(V);console.warn('Error evaluating <haz:one select="'+ai+'">. Assumed empty.');return P;}if(!ab){return P;}return T.transformChildNodes(Q,ab,P);case"each":var ai=Q.getAttribute("select");var X;try{X=T.provider.evaluate(ai,S,T.variables,true);}catch(V){v.postError(V);console.warn('Error evaluating <haz:each select="'+ai+'">. Assumed empty.');return P;}return A.reduce(null,X,function(ao,an){return T.transformChildNodes(Q,an,P);});}},transformTree:function(T,Q,U){var R=this;var O=T.nodeType;if(O!==1){throw Error("transformTree() expects Element");}var S=R.transformSingleElement(T,Q);var P=U.appendChild(S);return R.transformChildNodes(T,Q,P);},transformSingleElement:function(R,P){var Q=this;var O=R.hazardDetails;el=R.cloneNode(false);N.forEach(O.exprAttributes,function(U){var T;try{T=(U.namespaceURI===f)?I(U.mexpression,Q.provider,P,Q.variables):E(U.expression,Q.provider,P,Q.variables,U.type);}catch(S){v.postError(S);console.warn("Error evaluating @"+U.attrName+'="'+U.expression+'". Assumed false.');T=false;}d(el,U.attrName,T);});return el;}});function z(S,U){var R={};var P=t.getTagName(S);var O=U.lookupPrefix(m);var Q=P.indexOf(O)===0;if(Q){P=P.substr(O.length);var T=c[P];R.definition=T||{tag:""};}R.exprAttributes=J(S,U);return R;}function J(R,S){var Q=[];var P=S.lookupNamespace(h);var O=S.lookupNamespace(f);N.forEach(N.map(R.attributes),function(T){var W=N.find([P,O],function(Z){return(T.name.indexOf(Z.prefix)===0);});if(!W){return;}var X=W.prefix;var U=W.urn;var V=T.name.substr(X.length);R.removeAttribute(T.name);var Y={namespaceURI:U,prefix:X,attrName:V,type:"text"};switch(U){case h:Y.expression=q(T.value);break;case f:Y.mexpression=g(T.value);break;default:break;}Q.push(Y);});return Q;}function d(Q,O,R){var P=typeof R;if(P==="undefined"||P==="boolean"||R==null){if(!R){Q.removeAttribute(O);}else{Q.setAttribute(O,"");}}else{Q.setAttribute(O,R.toString());}}function s(R,S,Q,T){var P=g(R);var O=I(P,S,Q,T);return O;}function x(P,T,Q,U,R){var S=q(P);var O=E(S,T,Q,U,R);return O;}function g(P){var Q=[];var O=P.replace(/\{\{((?:[^}]|\}(?=\}\})|\}(?!\}))*)\}\}/g,function(R,S){Q.push(S);return"{{}}";});Q=Q.map(function(R){return q(R);});return{template:O,expressions:Q};}function q(O){var Q={};Q.text=O;var P=O.split(a);Q.selector=P.shift();Q.filters=[];N.forEach(P,function(T){T=T.trim();var X=T;var R=X.match(/^([_a-zA-Z][_a-zA-Z0-9]*)\s*(:?)/);if(!R){console.warn("Syntax Error in filter call: "+T);return false;}var V=R[1];var U=R[2];X=X.substr(R[0].length);if(!U&&/\S+/.test(X)){console.warn("Syntax Error in filter call: "+T);return false;}try{var S=(Function("return ["+X+"];"))();}catch(W){console.warn("Syntax Error in filter call: "+T);return false;}Q.filters.push({text:T,name:V,params:S});return true;});return Q;}function I(O,R,Q,S){var P=0;return O.template.replace(/\{\{\}\}/g,function(T){return E(O.expressions[P++],R,Q,S,"text");});}function E(T,U,P,V,Q){var S=(P&&P.nodeType)?(P.nodeType===9?P:P.ownerDocument):e;var R=U.evaluate(T.selector,P,V);N.every(T.filters,function(W){if(R==null){R="";}if(R.nodeType){if(R.nodeType===1){R=R.textContent;}else{R="";}}try{R=p.evaluate(W.name,R,W.params);return true;}catch(X){v.postError(X);console.warn('Failure processing filter call: "'+W.text+'" with input: "'+R+'"');R="";return false;}});result=O(R,Q);return result;function O(Y,W){switch(W){case"text":if(Y&&Y.nodeType){Y=Y.textContent;}break;case"node":var aa=S.createDocumentFragment();if(Y&&Y.nodeType){aa.appendChild(S.importNode(Y,true));}else{var Z=S.createElement("div");Z.innerHTML=Y;var X;while(X=Z.firstChild){aa.appendChild(X);}}Y=aa;break;case"boolean":if(Y==null||Y===false){Y=false;}else{Y=true;}break;default:if(Y&&Y.nodeType){Y=Y.textContent;}break;}return Y;}}N.assign(b,{HazardProcessor:k});}).call(this,this.Meeko);
/*!
 * Builtin Processors
 * Copyright 2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(g){var e=this;var a=e.Meeko;var b=a.processors;var f=a.MainProcessor;b.register("main",f);var d=a.ScriptProcessor;b.register("script",d);var c=a.HazardProcessor;b.register("hazard",c);}).call(this,this.Meeko);(function(f){var e=this;var a=e.Meeko;var d=a.stuff;var c=a.Registry;var b=new c({writeOnce:true,testKey:function(g){return typeof g==="string";},testValue:function(g){return g!=null&&typeof g==="object";}});f.configData=b;}).call(this,this.Meeko);
/*!
 * HyperFrameset
 * Copyright 2009-2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(g){var j=this;var m=j.document;var o=j.Meeko;var n=o.stuff;var h=o.Task;var l=o.Promise;var k=o.URL;var p=o.DOM;var d=o.configData;var i=o.sprockets;var c="form@submit,reset,input,change,invalid,keydown,keyup input,textarea@input,change,invalid,focus,blur,keyup,keydown select,fieldset@change,invalid,focus,blur,keydown,keyup button@click";var e=(function(q){var r={};n.forEach(q.split(/\s+/),function(v){var s=v.split("@");var t=s[0].split(",");var u=s[1].split(",");n.forEach(t,function(w){r[w]=n.map(u);});});return r;})(c);var a={};function f(){n.forOwn(a,function(s,q){var r=g[s];i.registerElement(q,r);});}n.forOwn(e,function(s,q){var t="Configurable"+n.ucFirst(q);var r=i.evolve(i.RoleType,{});n.assign(r,{attached:function(u){var w=this;var x=w.element;if(!x.hasAttribute("config")){return;}var y=n.words(x.getAttribute("config"))[0];var v=d.get(y);if(!v){return;}n.forEach(s,function(A){var B="on"+A;var C=v[B];if(!C){return;}var z=function(){C.apply(w,arguments);};w[B]=z;u.push({type:A,action:z});});}});g[t]=r;a[q]=t;});var b=i.evolve(i.RoleType,{});n.assign(b,{attached:function(q){var s=this;var u=s.element;if(!u.hasAttribute("config")){return;}var v=n.words(u.getAttribute("config"))[0];var r=d.get(v);if(!r){return;}var t=n.words("submit reset change input");var w=false;n.forEach(t,function(y){var z="on"+y;var A=r[z];if(!A){return;}var x=function(B){if(p.closest(B.target,"form")){return;}A.apply(s,arguments);};s[z]=x;q.push({type:y,action:x});switch(y){default:break;case"submit":case"reset":w=true;}});if(w){m.addEventListener("click",function(y){if(p.closest(y.target,"form")){return;}var x=y.target.type;if(!(x==="submit"||x==="reset")){return;}h.asap(function(){var z=m.createEvent("CustomEvent");z.initCustomEvent(x,true,true,y.target);z.preventDefault();u.dispatchEvent(z);});},false);}}});a.body="ConfigurableBody";formElements={register:f};n.defaults(g,{ConfigurableBody:b,formElements:formElements});}).call(this,this.Meeko);
/*!
 * HyperFrameset Layout Elements
 * Copyright 2009-2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(l){var d=this;var k=d.document;var h=d.Meeko;var u=h.stuff;var r=h.DOM;var q=h.configData;var f=h.sprockets;var a=h.controllers;var i;var s=(function(){var v=f.evolve(f.RoleType,{});u.assign(v,{attached:function(w){v.connectOptions.call(this);},enteredDocument:function(){},leftDocument:function(){},connectOptions:function(){var x=this;x.options={};var y=x.element;if(!y.hasAttribute("config")){return;}var z=u.words(y.getAttribute("config"))[0];var w=q.get(z);x.options=w;}});return v;})();var b=(function(){var w=f.evolve(s,{role:"layer",isLayer:true});var v=1;u.assign(w,{attached:function(x){s.attached.call(this,x);this.css("z-index",v++);},enteredDocument:function(){s.enteredDocument.call(this);},leftDocument:function(){s.leftDocument.call(this);},isLayer:function(x){return !!x.$.isLayer;}});return w;})();var c=(function(){var v=f.evolve(s,{role:"popup",});u.assign(v,{attached:function(w){s.attached.call(this,w);},enteredDocument:function(){s.enteredDocument.call(this);v.connectController.call(this);},leftDocument:function(){s.leftDocument.call(this);},connectController:function(){var w=this;var x=w.attr("name");var y=w.attr("value");if(!x&&!y){return;}w.ariaToggle("hidden",true);if(!x){return;}a.listen(x,function(z){w.ariaToggle("hidden",!(u.includes(z,y)));});}});return v;})();var n=(function(){var v=f.evolve(s,{role:"panel",isPanel:true});u.assign(v,{attached:function(w){s.attached.call(this,w);v.adjustBox.call(this);},enteredDocument:function(){s.enteredDocument.call(this);v.connectController.call(this);},leftDocument:function(){s.leftDocument.call(this);},adjustBox:function(){var z=this.attr("overflow");if(z){this.css("overflow",z);}var w=this.attr("height");if(w){this.css("height",w);}var y=this.attr("width");if(y){this.css("width",y);}var x=this.attr("minwidth");if(x){this.css("min-width",x);}},connectController:function(){var w=this;var x=w.attr("name");var y=w.attr("value");if(!x&&!y){return;}w.ariaToggle("hidden",true);if(!x){return;}a.listen(x,function(z){w.ariaToggle("hidden",!(u.includes(z,y)));});},isPanel:function(w){return !!w.$.isPanel;}});return v;})();var p=(function(){var w=f.evolve(s,{role:"group",isLayout:true,owns:{get:function(){return u.filter(this.element.children,function(x){return r.matches(x,function(y){return n.isPanel(y)||w.isLayout(y);});});}}});u.assign(w,{attached:function(x){n.attached.call(this,x);},enteredDocument:function(){n.enteredDocument.call(this);w.adjustBox.call(this);w.normalizeChildren.call(this);return;},leftDocument:function(){n.leftDocument.call(this);},adjustBox:function(){var y=this.element;var A=y.parentNode;if(!r.matches(A,b.isLayer)){return;}var x=this.attr("height");if(!x){x="100vh";}else{x=x.replace("%","vh");}this.css("height",x);var z=this.attr("width");if(!z){z="100vw";}else{z=z.replace("%","vw");}if(z){this.css("width",z);}},normalizeChildren:function(){var x=this.element;u.forEach(u.map(x.childNodes),v,x);},isLayout:function(x){return !!x.$.isLayout;}});function v(z){var y=this;switch(z.nodeType){case 1:if(r.matches(z,function(A){return n.isPanel(A)||w.isLayout(A);})){return;}z.hidden=true;return;case 3:if(/^\s*$/.test(z.nodeValue)){y.removeChild(z);return;}var x=y.ownerDocument.createElement("wbr");x.hidden=true;y.replaceChild(x,z);x.appendChild(z);return;default:return;}}return w;})();var o=(function(){var v=f.evolve(p,{});u.assign(v,{attached:function(x){p.attached.call(this,x);var w=this.attr("align");if(w){this.css("text-align",w);}},enteredDocument:function(){p.enteredDocument.call(this);},leftDocument:function(){p.leftDocument.call(this);}});return v;})();var m=(function(){var v=f.evolve(p,{});u.assign(v,{attached:function(w){p.attached.call(this,w);},enteredDocument:function(){p.enteredDocument.call(this);var w=this.attr("align");u.forEach(this.ariaGet("owns"),function(x){if(w){x.$.css("vertical-align",w);}});},leftDocument:function(){p.leftDocument.call(this);}});return v;})();var e=(function(){var v=f.evolve(p,{activedescendant:{set:function(y){var x=this.element;var w=this.ariaGet("owns");if(y&&!u.includes(w,y)){throw Error("set activedescendant failed: item is not child of deck");}u.forEach(w,function(z){if(z===y){z.ariaToggle("hidden",false);}else{z.ariaToggle("hidden",true);}});}}});u.assign(v,{attached:function(w){p.attached.call(this,w);},enteredDocument:function(){s.enteredDocument.call(this);p.adjustBox.call(this);p.normalizeChildren.call(this);v.connectController.call(this);},leftDocument:function(){p.leftDocument.call(this);},connectController:function(){var w=this;var x=w.attr("name");if(!x){w.ariaSet("activedescendant",w.ariaGet("owns")[0]);return;}a.listen(x,function(y){var z=w.ariaGet("owns");var A=u.find(z,function(C){var B=C.getAttribute("value");if(!u.includes(y,B)){return false;}return true;});if(A){w.ariaSet("activedescendant",A);}});}});return v;})();var g=(function(){var v=f.evolve(e,{});u.assign(v,{attached:function(w){e.attached.call(this,w);},enteredDocument:function(){e.enteredDocument.call(this);v.refresh.call(this);},leftDocument:function(){e.leftDocument.call(this);},refresh:function(){var x=parseFloat(d.getComputedStyle(this.element,null).width);var w=this.ariaGet("owns");var y=u.find(w,function(z){var A=d.getComputedStyle(z,null).minWidth;if(A==null||A===""||A==="0px"){return true;}A=parseFloat(A);if(A>x){return false;}return true;});if(y){y.$.css("height","100%");y.$.css("width","100%");this.ariaSet("activedescendant",y);}}});return v;})();function t(x){i=x;f.registerElement(i.lookupSelector("layer"),b);f.registerElement(i.lookupSelector("popup"),c);f.registerElement(i.lookupSelector("panel"),n);f.registerElement(i.lookupSelector("vlayout"),o);f.registerElement(i.lookupSelector("hlayout"),m);f.registerElement(i.lookupSelector("deck"),e);f.registerElement(i.lookupSelector("rdeck"),g);var w=["*[hidden] { display: none !important; }",i.lookupSelector("layer, popup, hlayout, vlayout, deck, rdeck, panel, body")+" { box-sizing: border-box; }",i.lookupSelector("layer")+" { display: block; position: fixed; top: 0; left: 0; width: 0; height: 0; }",i.lookupSelector("hlayout, vlayout, deck, rdeck")+" { display: block; width: 0; height: 0; text-align: left; margin: 0; padding: 0; }",i.lookupSelector("hlayout, vlayout, deck, rdeck")+" { width: 100%; height: 100%; }",i.lookupSelector("panel")+" { display: block; width: auto; height: auto; text-align: left; margin: 0; padding: 0; }",i.lookupSelector("body")+" { display: block; width: auto; height: auto; margin: 0; }",i.lookupSelector("popup")+" { display: block; position: relative; width: 0; height: 0; }",i.lookupSelector("popup")+" > * { position: absolute; top: 0; left: 0; }",i.lookupSelector("vlayout")+" { height: 100%; }",i.lookupSelector("hlayout")+" { width: 100%; overflow-y: hidden; }",i.lookupSelector("vlayout")+" > * { display: block; float: left; width: 100%; height: auto; text-align: left; }",i.lookupSelector("vlayout")+" > *::after { clear: both; }",i.lookupSelector("hlayout")+" > * { display: block; float: left; width: auto; height: 100%; vertical-align: top; overflow-y: auto; }",i.lookupSelector("hlayout")+"::after { clear: both; }",i.lookupSelector("deck")+" > * { width: 100%; height: 100%; }",i.lookupSelector("rdeck")+" > * { width: 0; height: 0; }",].join("\n");var v=k.createElement("style");v.textContent=w;k.head.insertBefore(v,k.head.firstChild);}var j={register:t};u.defaults(l,{HBase:s,Layer:b,Popup:c,Panel:n,HLayout:m,VLayout:o,Deck:e,ResponsiveDeck:g,layoutElements:j});}).call(this,this.Meeko);
/*!
 * HyperFrameset Elements
 * Copyright 2009-2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(l){var f=this;var k=f.document;var h=f.Meeko;var r=h.stuff;var a=h.Task;var c=h.Promise;var d=h.URL;var p=h.DOM;var m=h.httpProxy;var g=h.sprockets;var i;var e=h.Registry;var o=new e({writeOnce:true,testKey:function(t){return typeof t==="string";},testValue:function(t){return t!=null&&typeof t==="object";}});var q=h.HBase;var n=h.Panel;var s=(function(){var u=g.evolve(n,{role:"frame",isFrame:true,preload:function(v){var w=this;return c.pipe(v,[function(x){return w.definition.render(x,"loading");},function(x){if(!x){return;}return w.insert(x);}]);},load:function(v){var w=this;if(v){w.src=v.url;}return c.pipe(v,[function(x){return w.definition.render(x,"loaded",{mainSelector:w.mainSelector});},function(x){if(!x){return;}return w.insert(x,w.element.hasAttribute("replace"));}]);},insert:function(z,x){var A=this;var w=A.element;var v=A.options;if(A.bodyElement){if(v&&v.bodyLeft){try{v.bodyLeft(A,A.bodyElement);}catch(y){a.postError(y);}}g.removeNode(A.bodyElement);}if(x){if(v&&v.bodyEntered){try{v.bodyEntered(A,z);}catch(y){a.postError(y);}}var B=p.adoptContents(z,w.ownerDocument);g.insertNode("replace",w,B);return;}g.insertNode("beforeend",A.element,z);A.bodyElement=z;if(v&&v.bodyEntered){try{v.bodyEntered(A,z);}catch(y){a.postError(y);}}},refresh:function(){var x=this;var v=this.element;var w=x.attr("src");return c.resolve().then(function(){if(w==null){return x.load(null,{condition:"loaded"});}if(w===""){return;}var z=d(w);var A=z.nohash;var C=z.hash;var B={method:"get",url:A,responseType:"document"};var y;return c.pipe(null,[function(){return p.whenVisible(v);},function(){return x.preload(B);},function(){return m.load(A,B);},function(D){y=D;},function(){if(x.attr("src")!==w){return;}return x.load(y);}]);});}});r.assign(u,{attached:function(v){var y=this;var w=y.attr("def");y.definition=o.get(w);var x=y.definition.element.getAttribute("config");if(x){y.element.setAttribute("config",x);}n.attached.call(this,v);r.defaults(y,{bodyElement:null,targetname:y.attr("targetname"),src:y.attr("src"),mainSelector:y.attr("main")});u.observeAttributes.call(this,"src");},enteredDocument:function(){n.enteredDocument.call(this);this.refresh();},leftDocument:function(){n.leftDocument.call(this);this.attributeObserver.disconnect();},attributeChanged:function(v){if(v==="src"){this.refresh();}},observeAttributes:function(){var x=[].splice.call(arguments,0);var y=this;var w=y.element;var v=t(w,function(z){u.attributeChanged.call(y,z);},x);y.attributeObserver=v;},isFrame:function(v){return !!v.$.isFrame;}});var t=(f.MutationObserver)?function(w,y,x){var v=new MutationObserver(function(z,A){r.forEach(z,function(B){if(B.type!=="attributes"){return;}y.call(B.target,B.attributeName);});});v.observe(w,{attributes:true,attributeFilter:x,subtree:false});return v;}:function(w,y,x){function v(z){if(z.target!==z.currentTarget){return;}z.stopPropagation();if(x&&x.length>0&&x.indexOf(z.attrName)<0){return;}a.asap(function(){y.call(z.target,z.attrName);});}w.addEventListener("DOMAttrModified",v,true);return{disconnect:function(){w.removeEventListener("DOMAttrModified",v,true);}};};return u;})();function j(v){i=v;g.registerElement(i.lookupSelector("frame"),s);var u=[i.lookupSelector("frame")+" { box-sizing: border-box; }",i.lookupSelector("frame")+" { display: block; width: auto; height: auto; text-align: left; margin: 0; padding: 0; }"].join("\n");var t=k.createElement("style");t.textContent=u;k.head.insertBefore(t,k.head.firstChild);}var b={register:j};r.defaults(l,{HFrame:s,frameElements:b,frameDefinitions:o});}).call(this,this.Meeko);
/*!
 * HyperFrameset definitions
 * Copyright 2009-2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(m){var o=this;var g=o.Meeko;var u=g.stuff;var a=g.Task;var c=g.Promise;var r=g.DOM;var d=g.URL;var t=g.CustomNamespace;var j=g.NamespaceCollection;var p=g.configData;var e=g.filters;var k=g.decoders;var s=g.processors;var h="hyperframeset";var i=new t({name:"hf",style:"vendor",urn:h});var q=u.words("title meta link style script");var n=(function(){function v(x,w){if(!x){return;}this.framesetDefinition=w;this.init(x);}u.defaults(v.prototype,{init:function(z){var y=this;var w=y.framesetDefinition;u.defaults(y,{element:z,mainSelector:z.getAttribute("main")});var x=y.bodies=[];u.forEach(u.map(z.childNodes),function(B){var A=r.getTagName(B);if(!A){return;}if(u.includes(q,A)){return;}if(A===w.namespaces.lookupTagNameNS("body",h)){z.removeChild(B);x.push(new f(B,w));return;}console.warn("Unexpected element in HFrame: "+A);return;});},render:function(A,B,z){var y=this;var w=y.framesetDefinition;if(!z){z={};}u.defaults(z,{scope:w.scope,url:A&&A.url,mainSelector:y.mainSelector,});var x=u.find(y.bodies,function(C){return C.condition===B;});if(!x){return;}return x.render(A,z);}});return v;})();var f=(function(){function w(A,z){if(!A){return;}this.framesetDefinition=z;this.init(A);}var x=u.words("uninitialized loading loaded error");var v={blank:"uninitialized",waiting:"loading",interactive:"loaded",complete:"loaded"};function y(z){z=u.lc(z);if(u.includes(x,z)){return z;}return v[z];}u.defaults(w,{conditions:x,conditionAliases:v});u.defaults(w.prototype,{init:function(C){var A=this;var z=A.framesetDefinition;var D=C.getAttribute("condition");var B;if(D){B=y(D);if(!B){B=D;console.warn("Frame body defined with unknown condition: "+D);}}else{B="loaded";}u.defaults(A,{element:C,condition:B,transforms:[]});u.forEach(u.map(C.childNodes),function(E){if(r.getTagName(E)===z.namespaces.lookupTagNameNS("transform",h)){C.removeChild(E);A.transforms.push(new b(E,z));}});if(!A.transforms.length&&A.condition==="loaded"){console.warn("HBody definition for loaded content contains no HTransform definitions");}},render:function(D,B){var A=this;var z=A.framesetDefinition;if(A.transforms.length<=0){return A.element.cloneNode(true);}if(!D){return null;}var E=D.document;if(!E){return null;}var C=E;if(B.mainSelector){C=r.find(B.mainSelector,E);}return c.reduce(C,A.transforms,function(G,F){return F.process(G,B);}).then(function(G){var H=A.element.cloneNode(false);var F=r.find("body",G);if(F){G=r.adoptContents(F,H.ownerDocument);}u.forEach(r.findAll("link[rel~=stylesheet], style",G),function(I){I.parentNode.removeChild(I);});r.insertNode("beforeend",H,G);return H;});}});return w;})();var b=(function(){function v(x,w){if(!x){return;}this.framesetDefinition=w;this.init(x);}u.defaults(v.prototype,{init:function(w){var y=this;var B=y.framesetDefinition;u.defaults(y,{element:w,type:w.getAttribute("type")||"main",format:w.getAttribute("format")});if(y.type==="main"){y.format="";}var A=B.document;var D=A.createDocumentFragment();var z;while(z=w.firstChild){D.appendChild(z);}var E;if(w.hasAttribute("config")){var C=u.words(w.getAttribute("config"))[0];E=p.get(C);}var x=y.processor=s.create(y.type,E,B.namespaces);x.loadTemplate(D);},process:function(B,z){var y=this;var w=y.framesetDefinition;var C;if(y.format){C=k.create(y.format,{},w.namespaces);C.init(B);}else{C={srcNode:B};}var A=y.processor;var x=A.transform(C,z);return x;}});return v;})();var l=(function(){function z(D,C){if(!D){return;}this.namespaces=null;this.init(D,C);}u.defaults(z.prototype,{init:function(M,F){var N=this;u.defaults(N,{url:F.framesetURL,scope:F.scope});var D=N.namespaces=t.getNamespaces(M);if(!D.lookupNamespace(h)){D.add(i);}var J=d(F.scope);A(M,J);var E=r.findAll(N.namespaces.lookupSelector("frame",h),M.body);u.forEach(E,function(Q,P){var R=Q.getAttribute("src");if(R){var O=x(R,J);if(O!=R){Q.setAttribute("src",O);}}});var H=r.findAll("*[id]:not(script)",M.body);if(H.length){console.warn("@id is strongly discouraged in frameset-documents (except on <script>).\nFound "+H.length+", first @id is "+H[0].getAttribute("id"));}var G=r.findAll("script",M);u.forEach(G,function(O,P){if(O.type&&!/^text\/javascript/.test(O.type)){return;}if(O.hasAttribute("src")){return;}var R=O.id;if(!R){R=O.id="script["+P+"]";}var Q;if(O.hasAttribute("sourceurl")){Q=O.getAttribute("sourceurl");}else{Q=N.url+"__"+R;O.setAttribute("sourceurl",Q);}O.text+="\n//# sourceURL="+Q;});var K=M.body.firstChild;u.forEach(r.findAll("script[for]",M.head),function(O){M.body.insertBefore(O,K);O.setAttribute("for","");console.info("Moved <script for> in frameset <head> to <body>");});u.forEach(r.findAll("script",M.body),function(O){if(O.type&&!/^text\/javascript/.test(O.type)){return;}if(O.hasAttribute("for")){return;}M.head.appendChild(O);console.info("Moved <script> in frameset <body> to <head>");});var L="panel, frame";var C=N.namespaces.lookupSelector(L,h);w(M,C);var I=M.body;I.parentNode.removeChild(I);N.document=M;N.element=I;},preprocess:function(){var E=this;var D=E.element;u.defaults(E,{frames:{}});var C=r.findAll("script",D);u.forEach(C,function(N,L){if(N.type&&!/^text\/javascript/.test(N.type)){return;}if(N.hasAttribute("src")){console.warn("Frameset <body> may not contain external scripts: \n"+N.cloneNode(false).outerHTML);N.parentNode.removeChild(N);return;}var I=N.getAttribute("sourceurl");if(!N.hasAttribute("for")){console.warn("Frameset <body> may not contain non-@for scripts:\n"+E.url+"#"+N.id);N.parentNode.removeChild(N);return;}if(N.getAttribute("for")!==""){console.warn("<script> may only contain EMPTY @for: \n"+N.cloneNode(false).outerHTML);N.parentNode.removeChild(N);return;}var O=N;while(O=O.previousSibling){if(O.nodeType!==1){continue;}var R=r.getTagName(O);if(R!=="script"&&R!=="style"){break;}}if(!O){O=N.parentNode;}var P=O.hasAttribute("config")?O.getAttribute("config"):"";P=P?P.replace(/\s*$/," "+I):I;O.setAttribute("config",P);var Q="return ("+N.text+"\n);";try{var M=Function(Q);var K=M();p.set(I,K);}catch(J){console.warn("Error evaluating inline script in frameset:\n"+E.url+"#"+N.id);a.postError(J);}N.parentNode.removeChild(N);});var G=r.findAll(E.namespaces.lookupSelector("frame",h),D);var F=[];var H=[];u.forEach(G,function(K,J){var M=K.cloneNode(false);K.parentNode.replaceChild(M,K);var I=K.getAttribute("defid");var L=K.getAttribute("def");if(L&&L!==I){H.push(K);return;}if(!I){I="__frame_"+J+"__";K.setAttribute("defid",I);}if(!L){L=I;M.setAttribute("def",L);}F.push(K);});u.forEach(F,function(J){var I=J.getAttribute("defid");E.frames[I]=new n(J,E);});u.forEach(H,function(K){var M=K.getAttribute("def");var L=E.frames[M];if(!L){console.warn("Frame declaration references non-existant frame definition: "+M);return;}var J=L.element;if(!J.hasAttribute("scopeid")){return;}var N=K.getAttribute("id");if(N){console.warn("Frame declaration references a frame definition with scoped-styles but these cannot be applied because the frame declaration has its own @id: "+N);return;}N=J.getAttribute("id");var I=J.getAttribute("scopeid");if(N!==I){console.warn("Frame declaration references a frame definition with scoped-styles but these cannot be applied because the frame definition has its own @id: "+N);return;}K.setAttribute("id",I);});},render:function(){var C=this;return C.element.cloneNode(true);}});var B=d.attributes;function A(D,C){u.forOwn(B,function(F,E){u.forEach(r.findAll(E,D),function(G){u.forOwn(F,function(K,I){var J=G.getAttribute(I);if(J==null){return;}var H=x(J,C);if(H!=J){G[I]=H;}});});});}function x(C,E){var D=C.replace(/^scope:/i,"");if(D==C){return C;}return E.resolve(D);}function w(E,D){var C=r.findAll("style[scoped]",E.body);var F=r.createHTMLDocument("",E);u.forEach(C,function(L,H){var K=L.parentNode;if(!r.matches(K,D)){console.warn("Removing <style scoped>. Must be child of "+D);K.removeChild(L);return;}var G="__scope_"+H+"__";K.setAttribute("scopeid",G);if(K.hasAttribute("id")){G=K.getAttribute("id");}else{K.setAttribute("id",G);}L.removeAttribute("scoped");var I=L.sheet||(function(){var M=F.createElement("style");M.textContent=L.textContent;r.insertNode("beforeend",F.head,M);return M.sheet;})();y(I,v,K);var J=u.map(I.cssRules,function(M){return M.cssText;}).join("\n");L.textContent=J;r.insertNode("beforeend",E.head,L);return;});}function v(H,J,D){var F=this;switch(H.type){case 1:var C=F.getAttribute("scopeid");var I="#"+C+" ";var G=I+H.selectorText.replace(/,(?![^(]*\))/g,", "+I);var E=H.cssText.replace(H.selectorText,"");E=G+" "+E;D.deleteRule(J);D.insertRule(E,J);break;case 11:break;case 4:case 12:y(H,v,F);break;default:console.warn("Deleting invalid rule for <style scoped>: \n"+H.cssText);D.deleteRule(J);break;}}function y(D,G,F){var C=D.cssRules;for(var E=C.length-1;E>=0;E--){G.call(F,C[E],E,D);}}return z;})();u.defaults(l,{HYPERFRAMESET_URN:h});u.defaults(m,{HFrameDefinition:n,HFramesetDefinition:l,HBodyDefinition:f,HTransformDefinition:b});}).call(this,this.Meeko);
/*!
 * HyperFrameset framer
 * Copyright 2009-2016 Sean Hogan (http://meekostuff.net/)
 * Mozilla Public License v2.0 (http://mozilla.org/MPL/2.0/)
 */
(function(b){var F=this;var e=F.document;var u=F.Meeko;var Q=u.stuff;var t=u.Task;var y=u.Promise;var s=u.URL;var q=u.DOM;var x=u.scriptQueue;var I=u.htmlParser;var d=u.httpProxy;var z=u.CustomNamespace;var O=u.NamespaceCollection;var c=u.historyManager;var l=u.sprockets;var g=u.formElements;var E=u.layoutElements;var r=u.frameElements;var p=u.frameDefinitions;var G=u.HFramesetDefinition;var A=G.HYPERFRAMESET_URN;var L=u.HFrame;var i="frameset";var J="self";var n={};Q.defaults(n,{options:{},config:function(R){var S=this;if(!R){return;}Q.assign(S.options,R);}});var N=y.applyTo();Q.defaults(n,{frameset:null,started:false,start:function(R){var S=this;if(S.started){throw Error("Already started");}if(!R||!R.contentDocument){throw Error("No contentDocument passed to start()");}S.started=true;R.contentDocument.then(function(T){return d.add({url:e.URL,type:"document",document:T});});return y.pipe(null,[function(){return y.wait(function(){return !!e.body;});},function(){var T;T=S.lookup(e.URL);if(T){return T;}return R.contentDocument.then(function(U){return S.detect(U);});},function(T){if(!T){throw Error("No frameset could be determined for this page");}S.scope=T.scope;var U=s(T.framesetURL);if(U.hash){console.info("Ignoring hash component of frameset URL: "+U.hash);}S.framesetURL=T.framesetURL=U.nohash;return d.load(S.framesetURL,{responseType:"document"}).then(function(W){var V=W.document;return new G(V,T);});},function(T){return y.pipe(T,[function(){S.definition=T;return H(e,T);},function(){return T.preprocess();},function(){return P(e,T);}]);},function(){F.addEventListener("click",function(U){if(U.defaultPrevented){return;}var V=S.onClick(U);if(V===false){U.preventDefault();}},false);F.addEventListener("submit",function(U){if(U.defaultPrevented){return;}var V=S.onSubmit(U);if(V===false){U.preventDefault();}},false);C(S.definition);a();m();var T=S.definition.namespaces.lookupNamespace(A);E.register(T);r.register(T);D();g.register();return l.start({manual:true});},function(){return N.then(function(){var T=S.currentChangeset;return c.start(T,"",e.URL,function(U){},function(U){return S.onPopState(U.getData());});});},function(){j({module:"frameset",type:"enteredState",stage:"after",url:e.URL});},function(){return y.wait(function(){return q.checkStyleSheets();});}]);}});var H=function(T,S){if(v(T)){throw Error("The HFrameset has already been applied");}var R=q.cloneDocument(S.document);var U;return y.pipe(null,[function(){var V=T.head;Q.forEach(q.findAll("link[rel|=stylesheet]",V),function(W){V.removeChild(W);});},function(){var V=T.body;var W;while(W=V.firstChild){V.removeChild(W);}},function(){U=B(T);if(U){return;}U=T.createElement("link");U.rel=J;U.href=T.URL;T.head.insertBefore(U,T.head.firstChild);},function(){var V=T.createElement("link");V.rel=i;V.href=S.src;T.head.insertBefore(V,U);},function(){o(T.documentElement,R.documentElement);o(T.head,R.head);k(T,R.head,true);Q.forEach(q.findAll("script",T.head),function(V){x.push(V);});return x.empty();}]);};var P=function(U,T){var R=T.element;var S=e.body;o(S,R);};function h(T,U){var W=T.head;var S=v(T);if(!S){throw Error("No "+i+" marker found. ");}var V=B(T);if(U){Q.forEach(q.siblings("after",S,"before",V),R);}else{Q.forEach(q.siblings("after",V),R);}function R(X){if(q.getTagName(X)=="script"&&(!X.type||X.type.match(/^text\/javascript/i))){return;}W.removeChild(X);}}function k(T,S,V){var U=s(T.URL);var X=T.head;var R=v();if(!R){throw Error("No "+i+" marker found. ");}var W=B();h(T,V);Q.forEach(Q.map(S.childNodes),function(Y){if(Y.nodeType!=1){return;}switch(q.getTagName(Y)){default:break;case"title":if(V){return;}if(!Y.innerHTML){return;}break;case"link":break;case"meta":if(Y.httpEquiv){return;}break;case"style":break;case"script":if(!V){return;}if(!Y.type||/^text\/javascript$/i.test(Y.type)){Y.type="text/javascript?disabled";}break;}if(V){q.insertNode("beforebegin",W,Y);}else{q.insertNode("beforeend",X,Y);}if(q.getTagName(Y)=="link"){Y.href=Y.getAttribute("href");}});}function o(S,R){q.removeAttributes(S);q.copyAttributes(S,R);S.removeAttribute("style");}function v(S){if(!S){S=e;}var R=q.find("link[rel~="+i+"]",S.head);return R;}function B(S){if(!S){S=e;}var R=q.find("link[rel~="+J+"]",S.head);return R;}Q.defaults(n,{framesetEntered:function(R){var T=this;T.frameset=R;var S=e.URL;T.currentChangeset=R.lookup(S,{referrer:e.referrer});N.resolve();},framesetLeft:function(R){var S=this;delete S.frameset;},frameEntered:function(U){var S=n.definition.namespaces;var T;var R=q.closest(U.element.parentNode,L.isFrame);if(R){T=R.$;}else{R=e.body;T=R.$;}T.frameEntered(U);U.parentFrame=T;if(U.targetname===n.currentChangeset.target){U.attr("src",n.currentChangeset.url);}},frameLeft:function(S){var R=S.parentFrame;delete S.parentFrame;R.frameLeft(S);},onClick:function(W){var Y=this;if(W.button!=0){return;}if(W.metaKey||W.ctrlKey||W.altKey||W.shiftKey){return;}var R=q.closest(W.target,"a, [link]");if(!R){return;}var X;if(q.getTagName(R)==="a"){X=R;}else{X=q.find("a, link",R);if(!X){X=q.closest("a",R);}if(!X){return;}}var S=X.getAttribute("href");if(!S){return;}var V=s(e.URL);var T=V.resolve(S);var U={url:T,element:X};Y.triggerRequestNavigation(U.url,U);return false;},onSubmit:function(X){var Z=this;var U=X.target;if(U.target){return;}var T=s(e.URL);var V=T.resolve(U.action);var S={element:U};var R=Q.lc(U.method);switch(R){case"get":var aa=s(V);var Y=W(U);S.url=aa.nosearch+(aa.search||"?")+Y+aa.hash;break;default:return;}Z.triggerRequestNavigation(S.url,S);return false;function W(ab){var ac=[];Q.forEach(ab.elements,function(ad){if(!ad.name){return;}ac.push(ad.name+"="+encodeURIComponent(ad.value));});return ac.join("&");}},triggerRequestNavigation:function(R,S){y.defer(function(){var T=e.createEvent("CustomEvent");T.initCustomEvent("requestnavigation",true,true,S.url);var U=S.element.dispatchEvent(T);if(U!==false){location.assign(S.url);}});},onRequestNavigation:function(X,U){var aa=this;if(!U){throw Error("Invalid frame / frameset in onRequestNavigation");}var S=X.detail;var R={url:S,element:X.target};if(!U.isFrameset){if(Z(U,S,R)){return false;}return;}var T=s(e.URL);var ab=s(S);if(ab.origin!=T.origin){return;}var V=(ab.nohash===T.nohash);if(V){aa.onPageLink(S,R);return false;}var W=U;var Y=aa.lookup(S);if(!Y||!aa.compareFramesetScope(Y)){return;}if(Z(W,S,R)){return false;}return;function Z(ae,ac,ad){var af=ae.lookup(ac,ad);if(af===""||af===true){return true;}if(af==null||af===false){return false;}aa.load(ac,af,ae.isFrameset);return true;}},onPageLink:function(R,S){var T=this;console.warn("Ignoring on-same-page links for now.");},navigate:function(R,T){var S=this;return S.load(R,T,true);},load:function(R,ae,ad){var ac=this;var U=ac.frameset;var aa=ad||ad===0;var Z=ae.target;var ab=[];V(U,function(af){if(af.targetname!==Z){return;}ab.push(af);return true;});var S=s(R);var X=S.hash;var Y=S.nohash;var W={method:"get",url:Y,responseType:"document"};var T;return y.pipe(null,[function(){if(aa){return j({module:"frameset",type:"leftState",stage:"before",url:e.URL});}},function(){Q.forEach(ab,function(af){af.attr("src",S);});},function(){return d.load(Y,W).then(function(af){T=af;});},function(){if(ad){return c.pushState(ae,"",R,function(af){});}},function(){if(aa){return j({module:"frameset",type:"enteredState",stage:"after",url:R});}}]);function V(ag,af){Q.forEach(ag.frames,function(ai){var ah=af(ai);if(!ah){V(ai,af);}});}},onPopState:function(V){var U=this;var R=U.frameset;var T=[];var S=V.url;if(S!==e.URL){console.warn("Popped state URL does not match address-bar URL.");}U.load(S,V,0);}});Q.defaults(n,{lookup:function(S){var T=this;if(!T.options.lookup){return;}var R=T.options.lookup(S);if(R==null||R===false){return false;}if(typeof R==="string"){R=M(R,S);}if(typeof R!=="object"||!R.scope||!R.framesetURL){throw Error("Unexpected result from frameset lookup");}return R;},detect:function(S){var T=this;if(!T.options.detect){return;}var R=T.options.detect(S);if(R==null||R===false){return false;}if(typeof R==="string"){R=M(R,e.URL);}if(typeof R!=="object"||!R.scope||!R.framesetURL){throw Error("Unexpected result from frameset detect");}return R;},compareFramesetScope:function(R){var S=this;if(S.framesetURL!==R.framesetURL){return false;}if(S.scope!==R.scope){return false;}return true;},inferChangeset:K});function M(S,R){var U=s(R);var V=s(U.origin);var S=V.resolve(S);var T=f(S,R);return{scope:T,framesetURL:S};}function f(S,R){var U=s(R);var V=s(S);var T=U.base;var W=V.base;if(T.indexOf(W)>=0){T=W;}return T;}function K(S,R){var T={url:S};switch(typeof R){case"string":T.target=R;break;case"object":default:throw Error("Invalid changeset returned from lookup()");break;}return T;}var j=function(V){var R;switch(V.module){case"frameset":R=n.frameset.options;break;default:return y.resolve();}var S=R[V.type];if(!S){return y.resolve();}var T;if(S[V.stage]){T=S[V.stage];}else{switch(V.module){case"frame":T=V.type=="bodyLeft"?(V.stage=="before"?S:null):V.type=="bodyEntered"?(V.stage=="after"?S:null):null;break;case"frameset":T=V.type=="leftState"?(V.stage=="before"?S:null):V.type=="enteredState"?(V.stage=="after"?S:null):null;break;default:throw Error(V.module+" is invalid module");break;}}if(typeof T=="function"){var U=y.defer(function(){T(V);});U["catch"](function(W){throw Error(W);});return U;}else{return y.resolve();}};function C(R){Q.forOwn(R.frames,function(T,S){p.set(S,T);});}function a(){Q.assign(L.prototype,{frameEntered:function(R){this.frames.push(R);},frameLeft:function(S){var R=this.frames.indexOf(S);this.frames.splice(R);}});L._attached=L.attached;L._enteredDocument=L.enteredDocument;L._leftDocument=L.leftDocument;Q.assign(L,{attached:function(R){this.frames=[];L._attached.call(this,R);},enteredDocument:function(){n.frameEntered(this);L._enteredDocument.call(this);},leftDocument:function(){n.frameLeft(this);L._leftDocument.call(this);}});}var w=(function(){var S=u.HBase;var R=l.evolve(S,{role:"frameset",isFrameset:true,frameEntered:function(T){this.frames.push(T);},frameLeft:function(U){var T=this.frames.indexOf(U);this.frames.splice(T);},render:function(){var T=this;var W=T.definition;var V=this.element;var U=W.render();return y.pipe(null,[function(){Q.forEach(Q.map(U.childNodes),function(X){l.insertNode("beforeend",V,X);});}]);}});Q.assign(R,{attached:function(U){S.attached.call(this,U);var T=this;T.definition=u.framer.definition;Q.defaults(T,{frames:[]});u.ConfigurableBody.attached.call(this,U);},enteredDocument:function(){var T=this;n.framesetEntered(T);T.render();},leftDocument:function(){var T=this;n.framesetLeft(T);}});return R;})();function m(){var R=u.HBase;Q.assign(R.prototype,{lookup:function(U,V){var W=this;var T=W.options;if(!T||!T.lookup){return false;}var S=T.lookup(U,V);if(S===""||S===true){return true;}if(S==null||S===false){return false;}return n.inferChangeset(U,S);}});R._attached=R.attached;R.attached=function(S){R._attached.call(this,S);var U=this;var T=U.options;if(!T.lookup){return;}S.push({type:"requestnavigation",action:function(V){if(V.defaultPrevented){return;}var W=n.onRequestNavigation(V,this);if(W===false){V.preventDefault();}}});};}function D(){l.registerElement("body",w);var S=["html, body { margin: 0; padding: 0; }","html { width: 100%; height: 100%; }"];var R=e.createElement("style");R.textContent=S;e.head.insertBefore(R,e.head.firstChild);}Q.defaults(b,{HFrameset:w,framer:n});}).call(this,this.Meeko);